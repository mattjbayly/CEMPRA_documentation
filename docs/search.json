[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "CEMPRA Guidance Document",
    "section": "",
    "text": "CEMPRA\nLeave questions and comments below (via your GitHub account)",
    "crumbs": [
      "CEMPRA"
    ]
  },
  {
    "objectID": "index.html#project-components",
    "href": "index.html#project-components",
    "title": "CEMPRA Guidance Document",
    "section": "Project Components",
    "text": "Project Components\n\nGitHub Repository for CEMPRA R-Package (https://github.com/essatech/CEMPRA)\nGitHub Repository for CEMPRA R-Shiny Application (https://github.com/essatech/CEMPRAShiny)\nLIVE (online R-Shiny Application) (https://essa.shinyapps.io/CEMPRAShiny/)\nR-Package Tutorials (https://essatech.github.io/CEMPRA/index.html)\nGuidance Document (Real-time Updates): (https://mattjbayly.github.io/CEMPRA_documentation/)\n(old static version) Guidance Document (2024 pdf): (https://www.essa.com/wp-content/uploads/2024/05/Guideline_Documentation_Report-2024.03.14.pdf)\nStressor-Response Library: (https://mjbayly.com/stressor-response)",
    "crumbs": [
      "CEMPRA"
    ]
  },
  {
    "objectID": "index.html#purpose",
    "href": "index.html#purpose",
    "title": "CEMPRA Guidance Document",
    "section": "Purpose",
    "text": "Purpose\nThis document is the primary guidance document for the Cumulative Effects Model for Prioritizing Recovery Actions (CEMPRA). It includes a walkthrough of the model, its components, inputs and outputs, benefits and limitations, and instructions for using it in two available formats: an R package and an R Shiny Web Application. For further details on the model and examples of its implementation, please refer to (L. MacPherson et al., 2020), (L. M. MacPherson et al., 2023).",
    "crumbs": [
      "CEMPRA"
    ]
  },
  {
    "objectID": "index.html#acknowledgements",
    "href": "index.html#acknowledgements",
    "title": "CEMPRA Guidance Document",
    "section": "Acknowledgements",
    "text": "Acknowledgements",
    "crumbs": [
      "CEMPRA"
    ]
  },
  {
    "objectID": "index.html#joe-model-testimonial-to-joe-nelson",
    "href": "index.html#joe-model-testimonial-to-joe-nelson",
    "title": "CEMPRA Guidance Document",
    "section": "‘Joe Model’ Testimonial to Joe Nelson",
    "text": "‘Joe Model’ Testimonial to Joe Nelson\nThe CEMPRA model contains the Joe Model as a subcomponent. The Joe Model nickname was given in honour of the University of Alberta Ichthyologist Dr. Joseph Nelson ((L. MacPherson et al., 2020); (Murray et al., 2012)). We acknowledge Dr. Nelson’s profound impact on ichthyology and the original Alberta cumulative effects modelling framework acting as the foundation of the CEMPRA tool.",
    "crumbs": [
      "CEMPRA"
    ]
  },
  {
    "objectID": "index.html#executive-summary",
    "href": "index.html#executive-summary",
    "title": "CEMPRA Guidance Document",
    "section": "Executive Summary",
    "text": "Executive Summary\nThe Cumulative Effects Model for Prioritizing Recovery Actions (CEMPRA) is a cumulative effects modelling framework. The CEMPRA tool uses a series of standardized user-defined stressor-response functions to link environmental attributes to the system capacity and productivity of a target species/system. This framework design is as generalizable, simple, and versatile as possible so that users can apply the model to various geographic regions, contexts, systems, and species. As the name suggests, the CEMPRA tool helps prioritize recovery actions for data-limited species and species-at-risk, with the flexibility to accommodate both data-rich and data-poor study systems and to facilitate and efficient transition from simple to complex modelling within a single platform as more information becomes available for a target species. The CEMPRA is intended as a low-barrier tool and is accessible as an open-source R package (https://github.com/essatech/CEMPRA) and R Shiny interactive web application (https://github.com/essatech/CEMPRAShiny).\nStressor-response functions form the foundation of the CEMPRA tool. A stressor variable is broadly characterized as an environmental driver resulting in an observable biological response in a target population ((Pirotta et al., 2022); (Rosenfeld et al., 2022); (Jarvis et al., 2023)). Within the CEMPRA tool, stressors represent and capture various metrics of cumulative effects (direct or proximal) and their associated impact pathways (e.g., stream temperature, sedimentation, habitat loss).\nStressor-response functions are developed for each metric in a standardized format and linked to population-level productivity (mean system capacity, usually expressed as density or total abundance of the adult population in the basic Joe model) or specific vital rates within a life cycle modelling framework. Users then populate a matching table of stressor-magnitude values linked to various locations (spatial units) of interest. Finally, the CEMPRA tool runs to generate stochastic simulations of the study system under different user-defined management or recovery scenarios. Comparisons between scenarios are commonly made against a default reference (status quo) scenario. Scenarios generally consist of various “alternative futures” to characterize potential impacts from development activities and/or alternative restoration/recovery efforts. Comparisons between scenarios can be quantitative (e.g., looking at a weighted mean system capacity or relative productivity) or qualitative by simply looking at a heatmap of stressors across the landscape.\nThere are two modelling pathways and associated endpoints within the CEMPRA framework: 1) the first is the basic Joe Model that estimates system capacity (a generalized response metric, typically represented by percent of maximum adult population size since it is a single-stage model); and 2) a stage-structured life cycle model, where stressor-response relationships are directly linked to specific life stages and vital rates. The life cycle model allows users to adjust vital rate parameters to estimate cumulative effects at the population level and is intended for data-rich populations or species. The combination of the Joe model and life-cycle model embedded within the CEMPRA framework allows flexibility to handle data-poor and data-rich species within the same platform.\nAdditional supporting resources are being developed to facilitate ease of use and collaboration between individuals studying cumulative effects. These resources include the development of an online stressor-response library (digital archive), example species profiles of population vital rates for running the life cycle model, case studies, and tutorial resources.\n\n\n\n\n\nJarvis, L., Rosenfeld, J., Gonzalez-Espinosa, P., & Enders, E. (2023). A process framework for integrating stressor-response functions into cumulative effects models. Science of the Total Environment, XXX, 167456.\n\n\nMacPherson, L. M., Reilly, J. R., Neufeld, K. R., Sullivan, M. G., Paul, A. J., & Johnston, F. D. (2023). Prioritizing bull trout recovery actions using a novel cumulative effects modelling framework. Fisheries Management and Ecology, 1–17.\n\n\nMacPherson, L., Sullivan, M., Reilly, J., & Paul, A. (2020). Alberta’s fisheries sustainability assessment: A guide to assessing population status, and quantifying cumulative effects using the joe modelling technique. Canadian Science Advisory Secretariat (CSAS).\n\n\nMurray, A. M., Sullivan, M. G., & Acorn, J. (2012). A tribute to joseph schieser nelson, 1937–2011. Canadian Field-Naturalist, 125, 373–380.\n\n\nPirotta, E., Thomas, L., Costa, D. P., Hall, A. J., Harris, C. M., Harwood, J., et al. (2022). Understanding the combined effects of multiple stressors: A new perspective on a longstanding challenge. Science of the Total Environment, 821, 153322.\n\n\nRosenfeld, J., Gonzalez-Espinosa, P., Jarvis, L., Enders, E., Bayly, M., Paul, A., MacPherson, L., Moore, J., Sullivan, M., Ulaski, M., et al. (2022). Stressor-response functions as a generalizable model for context dependence. Trends in Ecology & Evolution.",
    "crumbs": [
      "CEMPRA"
    ]
  },
  {
    "objectID": "01_intro.html",
    "href": "01_intro.html",
    "title": "1  Introduction",
    "section": "",
    "text": "Many species are under significant pressure from human development and resource use. These effects are coupled with existing pressures from climate change and natural disturbances. Collectively, these pressures can compound and interact to have cumulative effects on many species and ecosystems. Attempts have been made to quantify, map, and model cumulative effects across a landscape or region of interest to understand current conditions, high vs low-risk areas, and potential future conditions under different (hypothetical) development scenarios. However, the applicability of many analytical tools and frameworks is often constrained to specific geographies, study systems or regulatory requirements. In addition, many tools or frameworks are either too specific or over-generalized to be broadly transferable, causing researchers to develop their own models from scratch and duplicate efforts when undertaking cumulative effects (CE) assessments. In addition, most CE modelling tools merely rank the severity of local stressors using an additive or multiplicative scoring system based on the co-occurrence of multiple stressors (e.g., (Halpern & Fujita, 2013)). While this provides a useful index of local stressor magnitude, it provides limited insight into how ecological values will respond to stressor reduction, which requires predictive stressor-response functions.\nThe CEMPRA tool leverages (and automates) common data processing and analytical pathways reoccurring across numerous cumulative effects assessments. The development team behind the CEMPRA tool also recognizes that many cumulative effects assessments are collaborative and highly iterative. As such, an interactive web application was developed alongside an analytical R-package to facilitate the development of cumulative effects assessments in a workshop-like setting. The CEMPRA R-Shiny web application facilitates the inclusion and leadership of land stewards and decision-makers in the assessment and analytical process by working around a centralized interactive choropleth (heat) map. Key locations are represented by polygons on the map linked to interactive stressors and stressor-response relationships. Numerous interactive visualizations and summary tables are included within the tool to facilitate rapid “what if” scenario assessments. The CEMPRA tool does not include all possible options for advanced analytics. However, it can be a useful starting point to engage different user groups and work towards a shared understanding of key drivers, processes and opportunities for a target study system and region of interest.\nThe inspiration for the CEMPRA tool originated from many case studies centred around aquatic species-at-risk in Canada and is based on the Alberta Cumulative Effects model ((L. MacPherson et al., 2020), (L. M. MacPherson et al., 2023)). However, the underlying framework is not explicitly bound to aquatic or terrestrial ecosystems. Aquatic ecosystems have remained the primary focus of the CEMPRA tool’s development in response to numerous contemporary priorities, including a) practical guidance for watershed management, b) recent amendments to the Fisheries Act prompting the consideration of cumulative effects (past and current), c) empowering practitioners with tools and resources to initialize collaborative cumulative effects assessments.\nKey components of the CEMPRA include a focal study system (e.g., a target population), a focal area of interest (i.e., a target region with defined sub-areas, locations, or spatial units with different stressor levels), key stressors of interest (e.g., stream temperature, sedimentation, habitat loss), stressor-response functions linking key stressors to the focal population or species of interest, estimates of stressor magnitude levels across the target region of interest (e.g., current stressor conditions in the different spatial units), and different assessment endpoints (i.e., either the single-stage Joe model output or the life cycle model output) for data-rich and data-limited systems, and scenarios to represent in the model (i.e., future “what if” possibilities or alternative management scenarios).\nCore Components of the CEMPRA Tool:\nUnlike most CE models that score (weight) multiple stressors to generate an index of overlapping stressor levels at a given location ((Halpern & Fujita, 2013)), CEMPRA goes one step further to estimate the impact of a given stressor level on a target ecological response in any given spatial unit, based on local stressor levels. This “Joe” model structure requires the following components:\nStudy System: In all applications of the CEMPRA tool, users should frame their assessment around a focal study system. Previous (and ongoing) applications of the Joe/CEMPRA model have included Athabasca Rainbow Trout ((Sullivan, 2017)), Bull trout in Alberta ((L. M. MacPherson et al., 2023)), Chinook Salmon in the Nicola Basin ((Pearsall, 2022)) and the Plains Sucker in Southeastern Alberta (L. Jarvis, personal communication, February 23, 2023). On occasion, the term “study system” is used in conjunction with “cumulative effects” to describe a project or development within the Environmental Impact Assessment (EIA) literature. However, the CEMPRA tool uses specific user-defined valued ecosystem components as the study system. Usually, these are target populations or species, but occasionally they can be interpreted as broader entities with basic applications of CEMPRA where stressors are linked to “aquatic ecosystems”. If broader interpretations describe a study system, care should be taken to ensure that the stressor response functions are still interpretable and biologically relevant. For example, suppose CEMPRA is used for a multi-species assessment. In that case, creating species-specific stressor response curves and running scenarios for each species will likely be necessary.\nStressors: Stressors and stressor-response functions are a core part of the CEMPRA tool. For the purposes of this tool, “stressors” can be defined broadly as “any environmental variable (e.g., temperature, sediment, predation, competition) that can induce a biological response (positive or negative)” ((Rosenfeld et al., 2024); (Jarvis et al., 2023)). Stressors can include any user-defined environmental variable (or driver) that prevents the target species (or ecosystem component) from reaching a fully realized maximum system capacity that would presumably be possible without any harmful impacts. Stressors and stressor-response functions are described further in the next section.\nStressor-Response Function: Stressor-response functions link stressors to the local abundance of the target species or value. The key defining components of stressor-response functions within the CEMPRA tools are that they represent quantitative linkages between raw stressor values and the predicted biological response. Stressor-response functions are equivalent to dose-response curves. They can also be interpreted as habitat suitability curves; however, the default assumption in most cumulative effects assessments is that target locations under evaluation have the capacity to support the study species in the absence of extreme stressor levels. Stressors and stressor-response functions are described further in the next section.\nLocations: The terms “locations”, “study areas”, “spatial units”, “polygons”, and/or “assessment units” are used interchangeably to describe discrete user-defined locations in the study region. Locations are represented in the CEMPRA tool as spatial polygons; linear features like stream reaches can also be represented as narrow polygons. Spatial units can be user-defined based on environmental heterogeneity and an area’s capacity to support the target species. Ideally, location breaks are chosen such that stressor values are largely homogenous within a spatial unit. Location breaks can also be defined to represent known (or suspected) subpopulations if they match management objectives or variations in stressor levels. In most cumulative effects assessments of aquatic ecosystems, location breaks will almost always be generated based on watersheds or subbasin boundaries since these natural geographic breaks often drive differences in key stressor values across the landscape.\nAssessment Endpoints: The ability to effectively link environmental stressors to a focal species using stressor-response functions is a core underlying function of the CEMPRA tool that differentiates it from many other cumulative effects models. Stressor-response functions allow stressor levels in a specific polygon to be used to predict the expected ecological response (system capacity). The CEMPRA tool provides two major workflows and assessment endpoints suitable for data-poor and data-rich systems. Stressor-response functions can be combined with stressor magnitudes in a polygon to predict local habitat capacity based on each stressor level, and the product of predicted habitat capacities for each stressor is used to generate an aggregate cumulative effect of all stressors on adult carrying capacity (the classical single-stage ‘Joe Model’); alternatively, stressors can be run through an integrated life cycle model where stressor-response functions are linked to vital rates (e.g., survivorship, capacity) for discrete life-history stages. The simplified roll-up (‘Joe Model’) is useful for data-limited species, but it also serves as a convenient framework for a rapid first-pass assessment to generate heatmaps of stressor severity. The integrated life cycle model has special utility for more data-rich systems where it’s possible to weight and understand stressors through the lens of a demographic stage-structured population framework. This can be especially important where some stressors will have disproportionate impacts on a specific life-history bottleneck and is appropriate for well-studies species with sufficient data to parameterize a population model.\nScenarios: Scenarios represent unique user-defined management or recovery interventions (or the absence of action in a reference scenario) that aid the comparison of the outcome of different management actions. Scenarios (or scenario profiles) can include a combination of changes in one or more stressors at one or more locations to represent a hypothetical management action (or inaction). Scenarios can be implemented as changes to the stressor values (across locations) and/or changes to the stressor-response relationships, changing the underlying assumption of impact pathways (e.g., for a sensitivity analysis if there is uncertainty in stressor magnitudes or stress-or response functions).\nThe purpose of this user guide is to introduce these concepts in further detail with examples that demonstrate how they can be used to implement cumulative effects assessments in the CEMPRA framework. The following sections include setup instructions, a quick start guide, an overview of data inputs, and example cases. The intent is also to highlight the flexibility of the CEMPRA tool as a a generalizable and easy-to-use cumulative effects modelling framework that is adaptable to many different systems and/or species.\n\n\n\n\nHalpern, B. S., & Fujita, R. (2013). Assumptions, challenges, and future directions in cumulative impact analysis. Ecosphere, 4, 1–11.\n\n\nJarvis, L., Rosenfeld, J., Gonzalez-Espinosa, P., & Enders, E. (2023). A process framework for integrating stressor-response functions into cumulative effects models. Science of the Total Environment, XXX, 167456.\n\n\nMacPherson, L. M., Reilly, J. R., Neufeld, K. R., Sullivan, M. G., Paul, A. J., & Johnston, F. D. (2023). Prioritizing bull trout recovery actions using a novel cumulative effects modelling framework. Fisheries Management and Ecology, 1–17.\n\n\nMacPherson, L., Sullivan, M., Reilly, J., & Paul, A. (2020). Alberta’s fisheries sustainability assessment: A guide to assessing population status, and quantifying cumulative effects using the joe modelling technique. Canadian Science Advisory Secretariat (CSAS).\n\n\nPearsall, et al. (2022). Nicola watershed RAMS final report 2022: Nicola basin chinook risk assessment final report. A process developed with the nicola collaborative research and technical committee.\n\n\nRosenfeld, J. S., Ayllón, D., Grant, J. W., Naman, S. M., Post, J. R., Matte, J.-M., et al. (2024). Determinants of productive capacity for stream salmonids. In J. Lobon-Cervia, P. Budy, & R. Gresswell (Eds.), Advances in the ecology of stream-dwelling salmonids (pp. 1–12). Springer Life Sciences.\n\n\nSullivan, M. (2017). Adaptive management of athabasca rainbow trout; cumulative effects modelling and potential management actions. Alberta Environment; Parks; Fisheries Management Branch.\n\n\n\nLeave questions and comments below (via your GitHub account)",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Introduction</span>"
    ]
  },
  {
    "objectID": "02_stressor_response.html",
    "href": "02_stressor_response.html",
    "title": "2  Stressor-Response Functions",
    "section": "",
    "text": "Stressor-response functions describe the relationship between a specific stressor (such as habitat loss, temperature, or a pollutant) and the response of a target species, where responses can include reduced abundance, growth rate, reproduction, or mortality ((Rosenfeld et al., 2024); (Jarvis et al., 2023)). Stressor-response functions are used to predict how a population (or study system) will respond to changes in the environment and to help identify thresholds or “critical levels” at which a stressor becomes harmful. Stressor-response functions are often used to inform environmental policy and management decisions, for example, by identifying risk levels of pollution or temperature change for a particular species or ecosystem1. Stressor-response functions are generally developed through primary research (i.e., mechanistic, empirical, experimental etc.) and expert opinion ((Pirotta et al., 2022); (Jarvis et al., 2023)). Stressor-response functions are often developed continuous empirical or mechanistic drelationships and identification of specific thresholds as harmful or benign will often be a subjective user-defined activity for stressors and responses that are without direct regulatory guidance (e.g., habitat area, population size).\nThere are many types of stressor-response functions, including linear, threshold, and non-linear ((Rosenfeld, 2017); (Larned & Schallenberg, 2019)). Linear functions describe a simple, linear relationship between the stressor and the response, with the response increasing or decreasing at a constant rate as the stressor increases. Threshold functions describe a breakpoint at which a stressor becomes harmful, beyond which the response increases rapidly. Non-linear functions describe more complex relationships, with the response changing at different rates as the stressor increases. The example provided in Figure 2.1 shows a customized non-linear stressor-response function fit to empirical data (reference points). Stressors do not always act independently ((Schäfer & Piggott, 2018); (Jarvis et al., 2023)), and it is also possible to include interactions among variables in stressor-response functions, such as the risk of exposure to a harmful pathogen being temperature dependent.\nFor a more in-depth discussion on the foundations of stressor-response functions, refer to the following resources:\nIncorporating Indigenous Knowledge: In many instances, stressor-response functions may be developed through expert opinion from local communities based on value systems. Where appropriate, working groups may include a customized stressor-response function to represent potential risks and values based on traditional knowledge systems and expert opinion. Refer to (Houde, 2007) and (Alexander et al., 2019) for further discussion. Examples of many other values-based Indigenous-led cumulative effects management programs exist across Canada.\nFor some examples of stressor-response functions see the online stressor-response Library: https://mjbayly.com/stressor-response\nLeave questions and comments below (via your GitHub account)",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Stressor-Response Functions</span>"
    ]
  },
  {
    "objectID": "02_stressor_response.html#footnotes",
    "href": "02_stressor_response.html#footnotes",
    "title": "2  Stressor-Response Functions",
    "section": "",
    "text": "https://www2.gov.bc.ca/assets/gov/environment/air-land-water/water/waterquality/water-quality-guidelines/approved-wqgs/wqg_summary_aquaticlife_wildlife_agri.pdf.↩︎",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Stressor-Response Functions</span>"
    ]
  },
  {
    "objectID": "03_pathways_endpoints.html",
    "href": "03_pathways_endpoints.html",
    "title": "3  Modelling Pathways and Assessment Endpoints",
    "section": "",
    "text": "3.1 Individual Stressor Assessments (univariate)\nThe CEMPRA framework offers several different modelling options and assessment endpoints to choose from (Figure A.2). The specific endpoint to use will depend on the application, data availability, and overall objectives of the assessment. In the following section, we will describe stressor-response functions and the simplified “Joe Model” that combines the effects of multiple stressors on the single adult life stage. We will also discuss the integrated life cycle model, which links stressors to vital rates for multiple life history stages to project productivity and capacity of the target system. Although assessment endpoints differ between the modelling streams, they all rely on stressor-response functions as the central theme of the modelling process.\nWhen setting up a cumulative effects model, it is often essential to visualize the spatial distribution of stressor magnitudes. The CEMPRA visual interface is organized around a centralized map interface (see Section 6), which allows users to flip through stressors individually to produce univariate heatmaps (choropleth maps) of each stressor distribution (see Figure A.3). These summaries are simple yet useful to provide a general overview of the study area, stressors, and associated stressor-response functions. The visual interpretation of univariate stressor summaries is largely qualitative. The intent is to visually identify hotspots and/or determine which stressors are high everywhere or low everywhere based on the input stressor magnitude data for each location and the corresponding predicted habitat capacity.\nLeave questions and comments below (via your GitHub account)",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Modelling Pathways and Assessment Endpoints</span>"
    ]
  },
  {
    "objectID": "03_pathways_endpoints.html#individual-stressor-assessments-univariate",
    "href": "03_pathways_endpoints.html#individual-stressor-assessments-univariate",
    "title": "3  Modelling Pathways and Assessment Endpoints",
    "section": "",
    "text": "Figure 3.2: Example of single (univariate) assessment of stressors and stressor-response relationship for hypothetical stressors A & B with univariate heatmaps of predicted single-stressor habitat capacity (“Response” from 0-100%) generated for the study area.",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Modelling Pathways and Assessment Endpoints</span>"
    ]
  },
  {
    "objectID": "03_pathways_endpoints.html#joe-model-simplified-stressor-roll-up-summaries",
    "href": "03_pathways_endpoints.html#joe-model-simplified-stressor-roll-up-summaries",
    "title": "3  Modelling Pathways and Assessment Endpoints",
    "section": "3.2 Joe Model: Simplified Stressor Roll-up Summaries",
    "text": "3.2 Joe Model: Simplified Stressor Roll-up Summaries\nThe Joe Model component of the CEMPRA tool leverages the library of stressor-response functions, defined and uploaded by the user, to generate a simplified roll-up summary (cumulative effects score) across multiple stressors. These summaries are simply the product of the scaled response values (from 0 to 1, equivalent to 0-100% of the system carrying capacity for adults) of all stressors for each location (Figure A.4). Different stressors can be selected (or omitted) from this summary depending on data availability or to characterize different potential impact pathways.\nIn the Joe Model, the response component of each stressor-response function (y-axis) is characterized broadly as the ‘Mean System Capacity’ of the target study system. ‘Mean System Capacity’ specifically refers to the adult carrying capacity since the basic Joe model is single-stage and assumes that each stressor-response function is calibrated to the adult system capacity; for example, even though in reality, it is salmonid egg and fry survival that are directly impacted by high Selenium concentrations, the effect of selenium dose will be scaled to the impact on the adult population size in the Selenium stressor-response function. This simplification of stage-structured dynamics into a single life stage is one of the key features of the Joe model that allows application to data-deficient species.\nThe calculated Mean System Capacity (Figure A.4) is also referred to as a “cumulative effect score”. Although it can logically be considered an estimate of adult carrying capacity as described above, it also represents a scoring procedure for multiple stressors. In the Joe Model summaries, the cumulative effect score across stressors is calculated by multiplying the mean system capacity metrics together (Figure A.4). However, the model also offers the option for users to custom-define the scoring algorithm (e.g., so that it is not multiplicative; see Sandbox section), in which case it may no longer represent carrying capacity. The Joe Model does not require the weighting of individual stressors; since each stressor is scaled to a maximum of 1, they are all weighed equally by default. By doing this, the Joe Model avoids long-standing difficulties associated with weighting impacts ((Walters, 1997)). In effect, the weights of stressors are represented by the response value (0-1) associated with any given stressor magnitude (Figure A.4).\n\n\n\n\n\n\nFigure 3.3: Additive effect of multiple stressors in the Joe Model. Figure modified from (MacPherson et al., 2020)\n\n\n\nThe full implementation of the “Joe Model” extends this basic summary to include stochastic simulations with uncertainty represented in both the raw stressor values for each location and the response function (described further in Section 5). These summaries are useful to represent the risk of cumulative effects or current conditions as a distribution rather than a fixed value.",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Modelling Pathways and Assessment Endpoints</span>"
    ]
  },
  {
    "objectID": "03_pathways_endpoints.html#life-cycle-model",
    "href": "03_pathways_endpoints.html#life-cycle-model",
    "title": "3  Modelling Pathways and Assessment Endpoints",
    "section": "3.3 Life Cycle Model",
    "text": "3.3 Life Cycle Model\nAn integrated life cycle modelling framework is also included within the CEMPRA tool to evaluate the effects of stressors on population-level productivity and capacity (Figure 3.4). The embedded life cycle modelling framework consists of a stage-structured matrix model that allows users to link stressor-response functions to vital rates for specific life stages (e.g., egg survivorship, fry capacity etc.), unlike the Joe model, where the impact of stressors across multiple life stages are integrated into a single stressor-response function linked to adult capacity. The life cycle model estimates relative changes to population-level productivity and capacity through simulations. A flexible species profile input dataset is available so that users can change values in the species profile to represent different study systems with different life history stages or demographic parameters (e.g., Athabasca Rainbow Trout, Chinook Salmon, etc.). See sections 6.4 and 7 for a detailed summary of the life cycle modelling framework within the CEMPRA tool.\n\n\n\n\n\n\nFigure 3.4: Sample outputs from the Life Cycle Modelling component of the CEMPRA tool.\n\n\n\n\n\n\n\nMacPherson, L., Sullivan, M., Reilly, J., & Paul, A. (2020). Alberta’s fisheries sustainability assessment: A guide to assessing population status, and quantifying cumulative effects using the joe modelling technique. Canadian Science Advisory Secretariat (CSAS).\n\n\nWalters, C. (1997). Challenges in adaptive management of riparian and coastal ecosystems. Conservation Ecology [Online], 1(2), 1.",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Modelling Pathways and Assessment Endpoints</span>"
    ]
  },
  {
    "objectID": "04_initial_setup.html",
    "href": "04_initial_setup.html",
    "title": "4  Setup and Installation",
    "section": "",
    "text": "4.1 R-Package\nThere are two ways to interact with the CEMPRA (Joe Model): through the R Shiny web application or directly using the stand alone CEMPRA R package, which can be downloaded to the users personal computer. Individuals unfamiliar with R can access the web application currently available here:\nThe web version of the CEMPRA Tool: https://essa.shinyapps.io/CEMPRAShiny/\nHowever, we strongly recommend that individuals familiar with R download a local copy of the CEMPRA (Joe Model) Shiny application and run it on their own computers through RStudio. Running the application from your own computer reduces latency and other issues.\nThe CEMPRA framework is available as an R package and an R Shiny application. All components of the project are freely available and open source. Both the R package and the R Shiny application are freely available for download from GitHub:\nR package: https://github.com/essatech/CEMPRA/\nR Shiny application: https://github.com/essatech/CEMPRAShiny\nThe CEMPRA package is part of a larger initiative to develop a framework for modelling cumulative impacts to Species-at-Risk (SAR) to guide recovery planning and adaptive management based on stressor-response functions related to taxa-specific threats. This framework allows users to generate models across a range of complexity and data quality, treating stressor-response functions as modular entities. The long-term vision is to build a library of stressor-response functions to allow users to accelerate the transition to quantitative modelling and adaptive management for Species at Risk and to encourage the archiving of CEMPRA models along with Species at Risk recovery strategies.\nA quick start guide is provided below, but see Appendix D for tutorials and function documentation.\nLeave questions and comments below (via your GitHub account)",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Setup and Installation</span>"
    ]
  },
  {
    "objectID": "04_initial_setup.html#r-package",
    "href": "04_initial_setup.html#r-package",
    "title": "4  Setup and Installation",
    "section": "",
    "text": "Figure 4.1: CEMPRA package repository available on GitHub (https://github.com/essatech/CEMPRA/).",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Setup and Installation</span>"
    ]
  },
  {
    "objectID": "04_initial_setup.html#r-shiny-application",
    "href": "04_initial_setup.html#r-shiny-application",
    "title": "4  Setup and Installation",
    "section": "4.2 R Shiny Application",
    "text": "4.2 R Shiny Application\n\n\n\nMap Overview of results in the CEMPRA Shiny web application.\n\n\nThe CEMPRA modelling tool includes the CEMPRA R package, which is accompanied by an interactive R Shiny web application (https://essa.shinyapps.io/CEMPRAShiny; also available as the stand-alone Shiny app). This application acts as a flexible, user-friendly interface to interact with key components of the CEMPRA tool. It accepts user inputs for stressor-response functions, stressor magnitude, spatial units/polygons, and vital rates (for the life cycle model portion). Results are easily mapped, summarized, and plotted within the Map Overview page of the web application. Scenario results generated from the tool (and the associated life cycle model) can be exported directly from the application as an Excel spreadsheet (.xlsx). See Section 5 for details on data inputs and Section 6 for a complete walkthrough of the application.",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Setup and Installation</span>"
    ]
  },
  {
    "objectID": "04_initial_setup.html#initial-setup-and-installation",
    "href": "04_initial_setup.html#initial-setup-and-installation",
    "title": "4  Setup and Installation",
    "section": "4.3 Initial Setup and Installation",
    "text": "4.3 Initial Setup and Installation\nInexperienced R users can run the Joe Model directly through the web application (https://essa.shinyapps.io/CEMPRAShiny/). However, downloading and running the model directly in RStudio is recommended for improved performance. Running the application locally (outside of shinyapps.io) also guarantees data privacy. To run the application locally, users must first have R and RStudio downloaded and installed on their computers. The CEMPRA R package (https://github.com/essatech/CEMPRA/) and the local version of the R Shiny web application (https://github.com/essatech/CEMPRAShiny) can be downloaded from GitHub.\n\nTo install R and RStudio on your computer:\n\nGo to the R website (https://cran.r-project.org/) and follow the instructions to download the latest version of R for your operating system (Windows, Mac, or Linux).\nOnce the download is complete, double-click (open) the installer file and follow the prompts to install R on your computer.\nTo open and run R scripts (files ending in .R), you can use RStudio, a popular Integrated Development Environment (IDE) for R. You can download the latest version of RStudio from: https://rstudio.com/products/rstudio/download/.\n\n\nTo install the CEMPRA R package on your computer:\n\nDownload the CEMPRA R package from GitHub (https://github.com/essatech/CEMPRA/) onto your computer by clicking the green “Code” button and selecting “Download ZIP” from the dropdown. Unzip the folder once the download is complete.\nInstall the CEMPRA R Package. The easiest way to install the CEMPRA package is from within RStudio using remotes::install_github(). At this time, the package has not been published to CRAN, so the default install.packages() will not work for installing the CEMPRA package. Instead, use the remotes package (or devtools). Open RStudio and install the remotes package using the install.packages(\"remotes\") command in the Console. Next, install the CEMPRA package from GitHub using the following commands in the Console:\n\ninstall.packages(\"remotes\")\nlibrary(remotes)\nremotes::install_github(\"essatech/CEMPRA\")\nOnce installed, use the library(CEMPRA) command to call the CEMPRA package into RStudio. You should only have to do the above steps once on your computer.\n\n\n\nGraphical user interface, text, application, email. Description automatically generated.\n\n\nTo access the raw code and example data for the R Shiny application:\n\nDownload the CEMPRAShiny repository from GitHub (https://github.com/essatech/CEMPRAShiny) onto your computer by clicking the green “Code” button and selecting “Download ZIP” from the dropdown. Unzip the folder once the download is complete.\nOpen the .Rproj file in R-Studio by double-clicking on it.\n\n\n\n\nGraphical user interface, application. Description automatically generated.\n\n\n\nOpen a script called global.R by double-clicking on it in the bottom right corner. Next, click the ‘Install’ link on the yellow banner to install additional dependencies. Once complete, click the green arrow labelled ‘Run App’ to launch the application.\n\n\n\n\nGraphical user interface, text, application. Description automatically generated.\n\n\nWithin the CEMPRAShiny repository, example datasets are stored in the “demo” subfolder within the “data” folder:\nhttps://github.com/essatech/CEMPRAShiny/tree/main/data/demo\nYou only need to do the above steps once on your computer. Next time you need to launch the application, simply click on the CEMPRAShiny.Rproj file to open it in R Studio, then click on the green ‘Run App’ button or simply type ‘shiny::runApp()’ in the console to launch the application.\n(Advanced) Using Windows command line to clone a GitHub repository:\nFor users comfortable using the command line who wish to contribute to the project, GitHub repositories can be quickly cloned into a local directory using this alternative method:\nNote: Prior to using Git commands in the command line, you must download and install Git on your computer (link).\n\nNavigate to the desired GitHub repository (CEMPRA R package: https://github.com/essatech/CEMPRA/; CEMPRAShiny application: https://github.com/essatech/CEMPRAShiny).\nClick the green “Code” button and copy the URL from the HTTPS tab.\nOpen the Windows Command Prompt window on your computer. Set your working directory using the following command:\n\ncd “&lt;file path&gt;”\n\nNext, use the git clone command to clone the GitHub repository into a folder in your working directory. For example:\n\ngit clone https://github.com/essatech/CEMPRA.git",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Setup and Installation</span>"
    ]
  },
  {
    "objectID": "05_data_inputs.html",
    "href": "05_data_inputs.html",
    "title": "5  Data Inputs",
    "section": "",
    "text": "5.1 Stressor-Response Workbook\nLeave questions and comments below (via your GitHub account)",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Data Inputs</span>"
    ]
  },
  {
    "objectID": "05_data_inputs.html#stressor-response-workbook",
    "href": "05_data_inputs.html#stressor-response-workbook",
    "title": "5  Data Inputs",
    "section": "",
    "text": "5.1.1 Purpose\nThe stressor-response workbook contains all the stressor-response curves applicable to a target study system (e.g., Athabasca Rainbow Trout). These stressor-response curves are used within the CEMPRA (Joe Model) tool to predict cumulative effects additively given stressor magnitude values (discussed in the next section).\n\n\n5.1.2 Layout\nThe stressor-response workbook is an Excel workbook containing all stressor-response functions to be used in the CEMPRA (Joe Model). The first worksheet contained within this Excel workbook must be titled “Main”. This worksheet is used as a coversheet to describe and organize each of the stressor-response curves. Subsequent worksheets describe each of the stressor-response functions relevant to a particular species, where each stressor-response function has its own worksheet. Note that the spelling of the stressor name must be identical between the “Stressors” column in the “Main” worksheet and the worksheet title (on the bottom tab) for each stressor.\nWork is currently underway to develop an online stressor-response web database (a digital repository of stressor-response functions across species, systems and geographic areas compiled across reference literature). As this database grows, functionality will be expanded to automatically generate a stressor-response workbook of selected stressors using the R-package (CEMPRA). See details in Appendix A.\n\n5.1.2.1 Main Worksheet\n\n\n\n\n\n\nFigure 5.1: Main worksheet in the Stressor-Response workbook.\n\n\n\nFigure 5.1 shows the main worksheet in the Stressor-Response workbook.\nThe purpose of the “Main” worksheet is to organize and summarize stressor-response functions within the workbook. The columns within this worksheet are set up as follows. Inputs must be diligently followed in order for the code to work:\n\n\n\n\n\n\n\n\n\nColumn Name\nDescription\n\n\n\n\nStressors\nName of the stressor. This must match the stressor-response worksheet title. It must also match the “Stressor” column in the stressor magnitude workbook. Avoid the use of spaces in stressor names.\n\n\nStressor_cat\nCategory of the stressor. Only relevant if multiple stressors are linked with a defined interaction. If there is no interaction, simply copy the stressor name here.\n\n\nInteraction\nMin/max interactions between stressors. Set to NA or leave blank if there are no interactions. Possible interactions available include “Minimum” or “Maximum”. If multiple variables are linked together with “Minimum”, the variable with the lowest stressor-response score in the Joe Model will be used, and the other variables will be omitted from the CEMPRA (Joe Model) calculation. For example, consider road density and stream crossings (link these together with a Minium interaction to avoid double-counting highly correlated stressors). Once set, determine which stressors should then be linked together by defining groups in the “Linked” column. Use letters A, B, C etc., to define distinct groups. If no special interaction is defined between variables, then set these cells to NA.\n\n\nLinked\nFor Variable Interaction Linkages: Use NA if no interaction is defined for the target variable; otherwise, choose letters A, B, C, D etc. to specify variable groups. For example, if there were four stressor-response curves for July, August, September flows (highly correlated in some systems), and they were encoded as three separate stressors, users could apply the “Minimum” interaction function to link the lowest system capacity across all four terms but only have one summer flow SR function in the CEMPRA (Joe Model). In this case, the letter A would be used to group all these terms together.\n\n\nStress_Scale\nStressor Scale can be either “linear” or “log” to specify a linear or logarithmic function, respectively, for interpolation (in raw units of the stressor).\n\n\nFunction\nEither “continuous” or “step”. “Continuous” will apply linear interpolation between values, and “step” will adjust mean system capacity values in discrete steps (e.g., number of barriers).\n\n\nLife_stages\n(Only relevant for the Population Model) Which life stage should each stressor be linked to? Set all values to “adult” if unspecified. The default assumption in the Joe Model is that stressor-response curves are linked to “adult” system capacity. stage_e: eggs (linked to the egg to fry transition) stage_0: sub-yearling (linked to the sub-yearling (Age-0) age class. For example, fry or alevin) stage_1: yearling age class (e.g., parr, age-1 to age-2 transition). stage_2: stage 2 class (i.e., stage-2 to stage-3 transition). stage_3: stage 3 class (i.e., stage-3 to stage-4 transition). stage_x…: stage … class (i.e., stage-(x) to stage-(x+1) transition). stage_Pb_1: (anadromous only) applies to age-1 (yearlings/parr) pre-breeder (Pb) class. stage_Pb_2: (anadromous only) applies to age-2 pre-breeder (Pb) class. stage_Pb_3: (anadromous only) applies to age-3 pre-breeder (Pb) class. stage_Pb_…: (anadromous only) applies to age-x pre-breeder (Pb) class. stage_B_2: (anadromous only) applies to age-2 spawners (B-breeder) class. stage_B_3: (anadromous only) applies to age-3 spawners (B-breeder) class. stage_B_4: (anadromous only) applies to age-4 spawners (B-breeder) class. stage_B_x…: (anadromous only) applies to age-x spawners (B-breeder) class. spawners: (anadromous only) applies to all spawner age classes. u: (anadromous) applies to ALL spawning age classes, generally controls the global prespawn survivorship. u_3: (anadromous) applies to age-3 prespawn survivorship. u_4: (anadromous) applies to age-4 prespawn survivorship. u_…: (anadromous) applies to age-x prespawn survivorship. smig: (anadromous) applies to ALL spawning migration age classes, generally controls the global spawning migration survivorship. smig_3: (anadromous) applies specifically to age-3 spawning migration survivorship. smig_4: (anadromous) applies specifically to age-4 spawning migration survivorship. smig_…: (anadromous) applies specifically to age-x spawning migration survivorship.\n\n\n\nsmig: (anadromous) applies to ALL spawning migration age classes, generally controls the global spawning migration survivorship. smig_3: (anadromous) applies specifically to age-3 spawning migration survivorship. smig_4: (anadromous) applies to age-4 spawning migration survivorship. smig_…: (anadromous) applies to age-x spawning migration survivorship.\nIf you are making use of the integrated life cycle model, then possible life stages include “SE” for eggs and “S0” for hatchling/fry. Both SE and S0 are Age-0 individuals. For subsequent stages, use “stage_1”, “stage_2”, “stage_3” etc. for stage-specific linkages (see Section 6.4 and Section 8 for clarification).If the same stressor is linked to multiple life stages, special terms such as “sub_adult” or “adult” can be used to define linkages to all immature (Age-1+) stage classes and all mature (Age-1+) stage classes, respectively. The term “all” will mean that the stressor response curve is linked to all life stages.If the same environmental variable is linked to different life stages with different stressor-response curves, then it is recommended that the user duplicate stressor values and treat them as distinct environmental variables to avoid confusion (e.g., “Temperature_adult”, “Temperature_parr”). | | Parameters | Only relevant for the integrated life cycle model: leave blank for scenarios that only make use of the Joe Model.If the stressor-response function is being linked to a vital rate in the life cycle model, describe how the stressor-response curve is linked to the life stage (which vital rate is affected). This column can be left blank if a user is only interested in running the Joe Model.Possible mechanisms include “capacity”, “survival,” or “fecundity”. Once set, the response component of the stressor-response curve will act as a multiplier to the specified vital rate. For example, if a stressor is linked to “survival” of stage X and the stressor-response curve estimates a scaled response of 0.8 based on the stressor magnitude, then the default baseline survivorship will be multiplied by 0.8 in the simulation (e.g., original survivorship of life stage X: 0.34; adjusted survivorship of life stage X: 0.80.34 = 0.27).• survival: Stressors linked to “survival” modify the default survivorship of a given life stage transition.• capacity: Stressors linked to “capacity” will modify the stage-specific capacity values by a multiplier (0 – 1) based on the stressor-response relationship, regardless of the mechanism used to represent density-dependent constraints on growth (compensation ratios vs location and stage-specific K values, See Section 8). Capacity adjustments will be implemented as the final step in the calculation. Stressor-response functions linked to capacity will only have an effect if the life stage is parameterized with density-dependent constraints (e.g., compensation ratios ≠ 1.0 or Beverton-Holt K values enabled). If a stressor-response function is linked to a life stage, but there are no density-dependent constraints on that life stage in the life cycle profile, then the stressor will not have an effect on the simulation.• fecundity: Stressor-response functions linked to fecundity will adjust the (eps) eggs per spawner (female) using the response value as a multiplier on the default input fecundity. For example, if the default fecundity is 3,000 and a stressor linked to fecundity has an effect of 0.6 (response), then the resulting fecundity (epf) in the life cycle model will be 3,000  0.6 = 1,800. Note that the stressor-response relationships must be linked to a sexually mature life stage for the fecundity multiplier to be meaningful. For example, if a fecundity multiplier is linked to an early life stage (e.g., stage_1), but the target species does not become mature until stage_3, then the stressor will have no observable effect on the population.Response (effect) estimates from the stressor-response curves will always be adjusted to 0 if biological response values are below zero, and adjusted to 100 (1.0) if response values exceed 100% in the stressor-response workbook. This ensures that survivorship remains between 0 and 1. | | Units | Optional: include units as meta data (a friendly reminder). This column is not used in any calculations but is included as metadata and displayed on summary plots in the tool (where available). | | Model | Set all values to “Joe Model” if not using the life cycle model.This column is used to define which assessment endpoint the stressor-response curve should be applied to. Possible options include “All”, “Joe Model,” or “Life cycle model”. “All” specifies that the stressor-response curve is generic enough to be used in both the Joe Model and the life cycle model. “Joe Model” specifies that the stressor-response relationship should only be used in the simplified Joe Model roll-up summary. “Life cycle model” specifies that the stressor-response relationship is only applicable to the life cycle model. |\n\n\n5.1.2.2 Individual Stressor-Response Curve Worksheets\nThe remaining worksheets in the Stressor-response workbook are all used to describe the relationships between raw stressor values (on the x-axis) and the biological response (on the y-axis) (i.e., the stressor-response data).\n\n\n\n\n\n\nFigure 5.2: Example of an individual stressor worksheet within the stressor response Excel workbook.\n\n\n\n\nExample of an individual stressor worksheet within the stressor response Excel workbook.\n\nIndividual stressor worksheets within the stressor-response file contain stressor-response curves for each of the stressor-response functions outlined in the “Main” worksheet (one worksheet for each row). The spelling of the worksheet name must exactly match the spelling of the stressor on the ‘Main’ worksheet. Additional rows can be added (as needed) to increase the resolution and specify the shape of a complex non-linear stressor response curve. Threshold stressor-response functions or stressor-response functions with discrete values may have relatively few rows.\nThe columns within each stressor-response worksheet are formatted as follows:\n\n\n\n\n\n\n\nColumn Name\nDescription\n\n\n\n\n[Stressor]\nThe raw value of the stressor (on the x-axis). For example, the temperature would likely be valued in degrees Celsius, but the units and additional metadata are declared on the ‘Main’ worksheet.\n\n\nMean System Capacity (%)\nThe Mean System Capacity (on the y-axis) is associated with the raw stressor value on the x-axis. This column is the response component of the stressor-response curve. Values should be entered as a percentage and range from 0 to 100. Note that, for the life cycle model, this value may be the life-stage-specific dose-response curve for capacity or survival. Mean system capacity is user as a generic term across the Joe Model and Life Cycle Model.\n\n\nSD\nStandard Deviation (SD) is used to resample the mean system capacity (response) values based on a given stressor level. In the CEMPRA (Joe Model) simulations, environmental parameters are resampled for each batch replicate, year and location based on SD values in the stressor magnitude workbook. This column is used to represent uncertainty in the stressor-response relationship. Resampling will be based on the mean system capacity and SD values with a normal distribution (linear) or log scale (log) according to the value specified in the main worksheet under the Stress_Scale column.Regardless of the parameters for resampling, the lower limit and upper limit values will constrain values to fixed limits.If the SD value is set to zero, then no resampling will take place within the stressor-response curve.\n\n\nlow.limit\nThe lower limit for stressor-response resampling (see SD column distribution). Set to 0 as a default.\n\n\nup.limit\nThe upper limit for stressor-response resampling (see SD column distribution). Set to 100 as a default.\n\n\n\n\n\n\n\n5.1.3 How to Build Your Own Stressor-Response Function\nCEMPRA (Joe Model) users can either select pre-assembled stressor-response functions or define their own stressor-response functions for use in the model. A library is currently being developed to host pre-assembled stressor-response functions and their associated documentation (Appendix A). Users who develop their own stressor-response functions are encouraged to fill out the appropriate documentation for their function and upload it to this public stressor-response library for future use (Appendix A). Please see (MacPherson et al., 2020) and (Rosenfeld et al., 2022) for further discussion on fundamental considerations in the development of customized stressor-response functions.\n\n5.1.3.1 Methodology\nDepending on data availability, stressor-response functions may be developed from available empirical data, from the elicitation of experts and stakeholders, or from existing literature.\nWhen using empirical data, the response component of the stressor-response relationship must be standardized to a common response metric. For convenience, the CEMPRA tool uses Mean System Capacity as a generic nickname to represent a standardized response scaled from 0% to 100%. In the CEMPRA tool (both the Joe Model and Life Cycle Model assessment endpoints), stressor-response relationships are reported as a scaled response value from 0% to 100%. These values are reported in the stressor-response workbook. The default assumption is that when a stressor is at its lowest level (or least harmful state if the scale is reversed), the mean system capacity will be set to 100% for that stressor. If this adjustment is not made, scenarios will be ranked differently simply by including specific stressors for comparison regardless of ecological state.",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Data Inputs</span>"
    ]
  },
  {
    "objectID": "05_data_inputs.html#stressor-magnitude-file",
    "href": "05_data_inputs.html#stressor-magnitude-file",
    "title": "5  Data Inputs",
    "section": "5.2 Stressor Magnitude File",
    "text": "5.2 Stressor Magnitude File\n\n5.2.1 Purpose\nThe stressor magnitude file is an Excel worksheet which defines and bounds each stressor within the individual locations (i.e., spatial units) being assessed. Similar to the stressor-response functions, stressor magnitude values are sampled across locations with stochasticity. The stressor magnitude workbook is structured accordingly, with data for each stressor and location entered into the dataset in a long table format (as opposed to the standard wide table format). Each row specifies a unique stressor for each unique location. Therefore, the number of rows in this dataset should be equal to the number of stressors multiplied by the number of locations. For each simulation in the CEMPRA tool, values are sampled at random with stochasticity for each stressor and location. For each year and batch replicate, stressor magnitude values will be drawn from each normal (or lognormal) distribution based on the Mean and SD (standard deviation) and then further constrained based on the specified lower and upper limits.\nIf there is no suspected uncertainty or interannual variability in stressor magnitude values for a given stressor and/or location, then the SD value can be set to 0, and the lower limit, upper limit and distribution type can be ignored.\n\n\n\n\n\n\n\nFigure 5.3: Example of a stressor magnitude workbook.\n\n\n\n\n\n5.2.2 Layout\nEach row in the stressor magnitude workbook specifies a relationship between a unique stressor and a unique location. Locations (discussed in detail in the next section) are specified by a unique ID (HUC_ID) and NAME. The HUC_ID column is a legacy from an older version of the Joe Model that referenced Hydrological Unit Codes as ID values, but HUC_ID can be any set of unique IDs specified by the user for their spatial units of interest. The NAME column can be blank but is included for convenience since many users find it challenging to cross-reference ID values between different datasets.\n\n\n\n\n\n\n\n\nColumn Name\nDescription\n\n\n\n\nHUC_ID\nAn ID field is used to represent a unique location (spatial unit). The HUC_ID column is a legacy from an older version of the Joe Model that referenced Hydrological Unit Codes as ID values, but HUC_ID can be any set of unique IDs specified by the user for their spatial units of interest. The NAME column can be blank but is included for convenience since many users find it challenging to cross-reference ID values between different datasets.The HUC_ID field must match the feature column HUC_ID in the spatial polygons file.\n\n\nNAME\nThe NAME of the polygon in the spatial polygons file. This field must match the NAME column in the spatial polygons file, but it can be blank if a spatial unit does not have a defining name.\n\n\nStressor\nStressor Name. This must match the information and sheet names in the stressor-response workbook.\n\n\nStressor_cat\nName of the Stressor category. This column must match the spelling used in the stressor-response workbook.\n\n\nMean\nThe mean value of the stressor for the spatial unit (location) HUC_ID (polygon).\n\n\nSD\nStandard deviation (SD) of stressor values for the target HUC_ID. During the simulation, stressor values for each HUC_ID are resampled from a distribution with mean and SD values. Setting the SD to zero means that there will be no variability in the stressor value during the simulation.\n\n\nDistribution\nType of distribution to use for resampling. Either “normal” or “lognormal”. We recommend using a “normal” distribution where possible. Testing coverage is incomplete for “lognormal”.\n\n\nLow_Limit\nThe lower limit for resampling.\n\n\nUp_Limit\nThe upper limit for resampling.\n\n\nComments\nInternal comments by the user for personal reference. It can be blank.\n\n\n\n\n\n5.2.3 Assembling Your Own Stressor-Magnitude Data\nData for stressor magnitude estimates can come from a variety of sources, including GIS data, modelled data, field data, expert opinion, regional trends, or estimates from the literature. When assembling your own stressor magnitude data, stressor magnitudes and ranges will need to be assigned to the individual locations (spatial units) being represented in the model. Stressors within each location must be assigned a magnitude, and distribution or the SD value must be set to 0 for simulations with no stochasticity. Within each spatial unit, users can specify the mean value, standard deviation, distribution (normal or lognormal), and upper and lower limits of each stressor, as discussed in the previous section.\n\n\n\n\n\n\nFigure 5.4: Example of assigning stressor magnitudes values (stream temperature) to spatial units (locations).\n\n\n\nStressor magnitude values should be aggregated to locations to represent location-averaged estimates. Locations can be split and aggregated as needed such that each location represents averaged generalized conditions.",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Data Inputs</span>"
    ]
  },
  {
    "objectID": "05_data_inputs.html#locations-spatial-polygons",
    "href": "05_data_inputs.html#locations-spatial-polygons",
    "title": "5  Data Inputs",
    "section": "5.3 Locations (Spatial Polygons)",
    "text": "5.3 Locations (Spatial Polygons)\nLocations are represented in the CEMPRA tool as spatial polygons. Locations should be defined to reflect heterogeneity in stressor values across the study area.\nSpatial polygons are imported into the CEMPRA tool as a GIS data file. Possible formats include either geopackage (.gpkg) or shapefile (.shp) format. The spatial units GIS data file does not contain any stressor magnitude data for modelling but consists of just the geometry and fields for the location ID (HUC_ID) and NAME. The polygon geometry included in this file is used for display purposes only and is joined to the stressor magnitude file when imported into the CEMPRA. Therefore, the size and shape of each spatial unit do not influence any components of the assessment.\nRegardless of the file format, the GIS (locations) spatial polygon data file must meet the following criteria:\n\n“HUC_ID” field: The locations data layer must have an attributed field labelled ‘HUC_ID’ with a unique identifier for each spatial unit (location).\n“NAME” field: The locations data layer must have an attributed field labelled ‘NAME’. This field is included for convenience. Values in this field can be blank, but users are encouraged to populate this field.\nThe HUC_ID and NAME fields must match values (and spelling) in the stressor magnitude Excel input so data can be cross-referenced and joined in the tool.\nThe spatial polygons file must be imported in the standard latitude/longitude projection (CRS: “EPSG:4326 – WGS84”). External GIS software such as QGIS can be used to transform projections as needed.\nThere should be no geometry errors (invalid geometries) in the polygon geometry data. Run check geometry and fix errors in programs such as QGIS.\nSimplify geometries: we recommended running functions like ‘Simplify geometries’ in programs such as QGIS to reduce the file size before importing data into the CEMPRA tool. Ideally, the locations spatial polygon data file should be under 10MB for the best performance in the Shiny application. Processing larger datasets is possible by using the R package version of the CEMPRA tool.\n\n\n\n\n\n\n\nFigure 5.5: Example of a spatial polygons (locations) file and its associated attribute table with fields HUC_ID and NAME.",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Data Inputs</span>"
    ]
  },
  {
    "objectID": "05_data_inputs.html#life-cycles-profile",
    "href": "05_data_inputs.html#life-cycles-profile",
    "title": "5  Data Inputs",
    "section": "5.4 Life Cycles Profile",
    "text": "5.4 Life Cycles Profile\nThe life cycle profile (csv file) is an optional input applicable to users who are interested in running the integrated life cycle model. The life cycles profile file specifies all input parameters required to run the life cycle model (e.g., number of stages, survival rates, fecundity, etc.). The format of the life cycles profile is a generic template, but once populated, it is used to parameterize the life cycle model for a specific study system. Usually, this consists of a target population (e.g., Athabasca Rainbow Trout, Nicola Basin Chinook Salmon, etc.).\n\n“Parameters” field: Nickname for parameter. Can contain any text defined by the user.\n“Name” field: Target name field used by code in the population model. Inputs here are restricted.\n“Value” field: Input value for parameter Name.\n\nSee chapter on the life cycle model for further details.\n\n\n\n\n\n\nFigure 5.6: Example life cycles profile CSV file.\n\n\n\nA detailed discussion of the life cycles profile (csv file) is included in Section 8.2 with accompanying background information. It’s possible to run the Joe Model and omit the life cycle model entirely. Therefore, the life cycles profile csv should be considered as an optional input for advanced use cases of the CEMPRA tool.\n\n\n\n\nMacPherson, L., Sullivan, M., Reilly, J., & Paul, A. (2020). Alberta’s fisheries sustainability assessment: A guide to assessing population status, and quantifying cumulative effects using the joe modelling technique. Canadian Science Advisory Secretariat (CSAS).\n\n\nRosenfeld, J., Gonzalez-Espinosa, P., Jarvis, L., Enders, E., Bayly, M., Paul, A., MacPherson, L., Moore, J., Sullivan, M., Ulaski, M., et al. (2022). Stressor-response functions as a generalizable model for context dependence. Trends in Ecology & Evolution.",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Data Inputs</span>"
    ]
  },
  {
    "objectID": "06_r_shiny_app.html",
    "href": "06_r_shiny_app.html",
    "title": "6  Joe Model & Shiny App",
    "section": "",
    "text": "6.1 About\nThe R Shiny web application is a user-friendly interface for the CEMPRA powered by the CEMPRA R package. Users can access a working version R Shiny application hosted here. The following section is intended to walk new users through the components of the R Shiny web application.\nWhen you first access the R Shiny web application for the CEMPRA, you will be automatically directed to the About page. This page contains a brief introduction to the application and the CEMPRA (Joe Model) tool, a list of contributors, and a list of features for users to explore. A tutorial video is also embedded on this webpage to guide users through the application.\nLeave questions and comments below (via your GitHub account)",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Joe Model & Shiny App</span>"
    ]
  },
  {
    "objectID": "06_r_shiny_app.html#about",
    "href": "06_r_shiny_app.html#about",
    "title": "6  Joe Model & Shiny App",
    "section": "",
    "text": "Figure 6.1: About page in the R Shiny web application. 1) Tutorial video for using the R Shiny application. 2) Brief introduction to the CEMPRA and associated life cycle model. 3) List of contributors to the CEMPRA. 4) List of features included in the R Shiny web application. 5) Menu for the R Shiny application",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Joe Model & Shiny App</span>"
    ]
  },
  {
    "objectID": "06_r_shiny_app.html#upload-data",
    "href": "06_r_shiny_app.html#upload-data",
    "title": "6  Joe Model & Shiny App",
    "section": "6.2 Upload Data",
    "text": "6.2 Upload Data\nIf you would like to import a custom set of stressor-response functions, spatial polygons, or vital rates (for the life cycle model), select the Upload Data page in the menu on the left side of the screen. This page allows you to upload four key input files from your computer: the stressor-response workbook (.xlsx), the stressor-magnitude workbook (.xlsx), a spatial polygons file (.gpkg or .shp), and a life cycle profile (.csv). To upload a file from your computer, click “Browse…” on the toolbar below the associated file heading. Next, select the desired file from the file window and click “Open”. The file will begin to upload. A status bar will appear below the file name, indicating the upload status. Once the file has been successfully uploaded, the status bar will display “Upload complete”.\n\n\n\n\n\n\nFigure 6.2: Data upload page of the R Shiny web application. 1) Instructions for uploading files. 2) Location to upload stressor-response workbook (.xlsx). 3) Location to upload stressor magnitude workbook (.xlsx). 4) Location to upload spatial polygons file (.gpkg or .shp). 5) Location to upload life cycle profile (.csv).",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Joe Model & Shiny App</span>"
    ]
  },
  {
    "objectID": "06_r_shiny_app.html#joe-model-and-main-overview",
    "href": "06_r_shiny_app.html#joe-model-and-main-overview",
    "title": "6  Joe Model & Shiny App",
    "section": "6.3 Joe Model and Main Overview",
    "text": "6.3 Joe Model and Main Overview\n\n6.3.1 Map Window\nThe map window on the Map Overview page allows users to view stressor magnitudes and model results in a choropleth map based on the spatial polygons layer you imported. The map in the centre of the screen is interactive and allows users to scroll, zoom, and select individual polygons. When hovering over a polygon, users will see the name and HUC_ID of that polygon displayed directly above the map window. To select a polygon, click on it once. Selected polygons will appear in blue. Clicking on additional polygons will add to your selection. To deselect a polygon, click it again. The number of selected polygons (HUCs) will appear below the map window on the left-hand side. Click the “deselect all” button beside this text string to deselect all polygons.\n\n\n6.3.2 Stressors\nOn the Map Overview page, users can view stressor-response relationships for each of the stressors included in the input stressor-response Excel workbook. A list of these stressors is on the screen’s right side. Clicking on the chart icon next to one of the stressors opens a pop-up window to view the stressor-response curve and raw stressor-response table associated with that specific stressor. You can edit cell values within the stressor-response table by double-clicking on the cell you want to edit. Any edits to the stressor-response table will automatically appear in the stressor-response curve.\n\n\n\n\n\n\nFigure 6.3: Stressor-response relationship pop-up window example. 1) Description of table and stressor-response curve. 2) Stressor-response curve plot. 3) Stressor-response curve input table. 4) List of stressors used in the CEMPRA (Joe Model).",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Joe Model & Shiny App</span>"
    ]
  },
  {
    "objectID": "06_r_shiny_app.html#joe-model-runs",
    "href": "06_r_shiny_app.html#joe-model-runs",
    "title": "6  Joe Model & Shiny App",
    "section": "6.4 Joe Model Runs",
    "text": "6.4 Joe Model Runs\nTo run the Joe Model, click the “Joe Model” button in the centre of the lower panel. In the pop-up window, you can select/deselect variables that you want to include/exclude in the Joe Model run. In addition, you can specify the number of simulations or batch runs you would like to conduct (in the “Number of Simulations” box), and you can provide a name for the simulation (in the “Name of this Simulation” box). When you are ready to run the Joe Model for all spatial polygons in the study area, click “Run the Joe Model”. Note there is currently no option to run the Joe Model for individual spatial polygons.\n\n\n\n\n\n\nFigure 6.4: Pop-up window for the Joe Model. 1) Variables to include/exclude from cumulative effects modelling. 2) Inputs for the number of simulations and the name of the simulation. 3) Button to run the Joe Model. 4) Button to bring up the pop-up window.\n\n\n\n\n6.4.1 System Capacity Plots\nAfter running the Joe Model, a new section labelled “System Capacity Plots” will appear at the bottom of the map page. You can view tables and plots of the cumulative system capacity for selected watersheds (click “Selected watersheds”) or for all watersheds (click “All watersheds”) compared to the global mean system capacity across all simulations.\nSystem capacity plots show the scaled probability output from the Joe Model from stochastic simulations.\n\n\n\n\n\n\nFigure 6.5: System capacity plots for eleven spatial units (locations) showing the cumulative system capacity scores (mean, median and scaled probability distributions).",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Joe Model & Shiny App</span>"
    ]
  },
  {
    "objectID": "06_r_shiny_app.html#adjust-stressor-magnitude",
    "href": "06_r_shiny_app.html#adjust-stressor-magnitude",
    "title": "6  Joe Model & Shiny App",
    "section": "6.5 Adjust Stressor Magnitude",
    "text": "6.5 Adjust Stressor Magnitude\nUsers may wish to modify stressor values to represent recovery action or habitat loss. To view and edit stressor magnitudes for an individual spatial polygon, select the spatial polygon of interest and click “Adjust Magnitude” on the right-hand side of the lower panel. Next, review the mean system capacity in the pop-up window for one or more selected locations. Below this, a table containing all the stressors, their magnitudes and distributions will be displayed. Double-click on the desired cell to edit any of the values in this table. Adjust the mean value for each stressor (Mean), the standard deviation (SD), the distribution type (options are normal or lognormal), and the lower limit and upper limit (for stochastic simulations). Note that stressor names and system capacity values cannot be edited. If only one HUC is selected, values will appear in the table; however, if multiple HUCs are selected, the table will appear blank. When multiple HUCs are selected, all modified values will be shared across the selected HUCs. The mean system capacity is shown for selected HUCs to preview the model output.\n\n\n\n\n\n\nFigure 6.6: Example of single or multi-location stressor magnitude adjustment across spatial units.",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Joe Model & Shiny App</span>"
    ]
  },
  {
    "objectID": "06_r_shiny_app.html#weighting-joe-model-result-scores",
    "href": "06_r_shiny_app.html#weighting-joe-model-result-scores",
    "title": "6  Joe Model & Shiny App",
    "section": "6.6 Weighting Joe Model Result Scores",
    "text": "6.6 Weighting Joe Model Result Scores\nSeveral alternative methods are available to integrate or add up Joe Model Cumulative System Capacity Scores across locations:\n\nSummary Method 1: Cumulative System Capacity Scores are Summarized Across Locations with Equal Weighting\nSummary Method 2: Summarizing Cumulative System Capacity Scores Across Locations with a Locally Weighted Mean\nSummary Method 3: Multiply Joe Model Response Scores and Another Metric (e.g., area × density) to Weight Results Across Locations\n\nSummary Method 1: Cumulative System Capacity Scores are Summarized Across Locations with Equal Weighting\nOverview: When Joe Model Cumulative System Capacity result scores are summarized across locations (i.e., reach, polygon) and scenarios, by default the average score is calculated as an unweighted mean across locations (i.e., each location is weighted equally). This is appropriate if locations can be weighted equally or are assumed to be of equal value, size, etc. However, if this is not the case, then Summary Methods 2 or 3 can be used to summarize values as a weighted mean, and/or by taking the product of the scores and another weighting variable.\nCalculation Method: By default, Joe Model Cumulative System Capacity scores are summarized across locations with a simple unweighted mean. This is repeated for each MCMC batch replicate.\nApplications: If all locations represent approximately equal sizes or values, then this method is appropriate. In many instances, the Joe Model is run with locations that represent standardized hydrological units (watersheds), defined by a Hydrological Unit Code (HUC, 1-12). When using standardized hydrological units an unweighted mean is appropriate. In British Columbia, the Joe Model is occasionally run with Assessment Watersheds from the BC Freshwater Atlas. The Assessment Watersheds approximately represent standardized location units so summarizing values across locations with an unweighted mean is appropriate. In other instances, summaries are completed across discrete units as a part of an inventory where size and weighting are irrelevant (e.g., when comparing or summarizing status of populations or watersheds that are of equal intrinsic value).\nSummary Method 2: Summarizing Cumulative System Capacity Scores Across Locations with a Weighted Mean\nOverview: In many instances, taking an unweighted mean will not be appropriate because locations differ considerably in size/value, or there is prior knowledge about habitat availability or weighting per location. For example, consider discrete watersheds that differ considerably in terms of their size and stream area. Additionally, consider instances where there is prior knowledge about the actual habitat availability within a location. Where possible we want to adjust Joe Model Cumulative System Capacity Scores so that the final value reported across locations is weighted by an appropriate metric such as habitat area which will represent a proxy for local population size or habitat capacity.\nCalculation Method: We can choose to summarize system capacity scores with a weighting variable. Usually, the metric chosen for weighting is an estimate of size or habitat area. The weighting metric is chosen by the user and generally represents one of the latent habitat metrics that have been added to the stressor magnitude database, but are not necessarily associated with a stressor-response function.\nApplications: Locations represent non-standardized units such as stream reaches, watershed polygons etc. and there is rationale for assigning location-specific weighting to score summaries, i.e., habitat capacity and local population size will be proportional to habitat area.\nSummary Method 3: Multiply Joe Model Response Scores and Another Metric (e.g., N) to Weight Results Across Locations\nOverview: Ultimately, if we can (roughly) estimate habitat capacity (the hypothetical maximum number of individuals) at a location, then we can use the Joe Model system capacity response scores to estimate a change in habitat capacity by taking the product of the Joe Model response scores (0% to 100%, converted to 0 to 1) and an appropriate weighting variable (e.g., habitat capacity (N) by location, calculated as the product of habitat area × density). We can then report the final values in units of the weighting variable (e.g., Predicted Capacity, N). This calculation method provides a myriad of benefits since we can move away from reporting cumulative effect scores as a scale-independent “response percent” and report final values as more concrete units such as habitat capacity in terms of predicted population size (e.g., N) or habitat area (e.g., m²), etc. that are more easily interpretable to a wider audience.\nCalculation Method: By taking the product of the Joe Model response score and a weighting variable we convert final scores from a percent to units of the weighting variable. This method is similar to the basic Channel Unit Method described by (Cramer & Ackerman, 2009) to estimate habitat suitability and cumulative effects. Where i is the individual location (channel unit, stream reach, etc.), and the equation represents that change in the capacity across locations as each location is multiplied by all location-specific stressors (scaled from 0 to 1). The sum is taken across all (n) locations and reported as a final value across batch replicates.\nApplications:\n\nEstimating a Quantitative Change in Habitat Carrying Capacity: If it is possible to estimate habitat capacity per location (e.g., by multiplying stream area (m²) and an estimate of fish density [hypothetical max N/m²]), we can roughly estimate carrying capacity (N = N/m² × m²). We can then use this metric as the weighting variable in the calculation to report the final score as a change in capacity.\nEstimating an Absolute Change in the Weighted Usable Area (WUA): In many instream flow studies, WUA is described as the habitat area in a stream that is considered to be “functional” for a given species/life stage. The WUA value is reported in units of m² but is less than the total stream area. Various Habitat Suitability Index (HSI) curves for depth, velocity, cover, substrate, channel type etc. are multiplied together and then multiplied by the total stream wetted area to calculate the weighted usable area (WUA, m²). We can mimic this calculation in the toolbox if we treat HSI curves as stressors and then take the product of the Joe Model score (0-1) and stream area (m²).\n\nVarious other creative methods can be integrated with any metric of interest if there is a rationale to report final values in a specific unit.\nThe following section describes how to implement each of the different calculation methods in the CEMPRA R-Shiny Application. First, we need to run the Joe Model in the Main Overview tab. After the model is run we can review results in the Scenario Results section. We can also apply weighting in the socio-economic module (Figure 6.7).\n\n\n\n\n\n\nFigure 6.7: Where to apply weighting in the Joe Model.\n\n\n\nNext, we can choose to summarize values across locations with either a weighted or unweighted mean (Figure 6.8, Figure 6.9). By default, the Joe Model results are summarized across locations with an unweighted mean (Summary Method 1). By adjusting the ‘Product or Weight’ input box to ‘Weighted Mean’ and selecting a specific weighting variable we can generate results using Summary Method 2 (a weighted mean).\n\n\n\n\n\n\nFigure 6.8: Joe Model results summarized across locations with an unweighted mean (Summary Method 1).\n\n\n\n\n\n\n\n\n\nFigure 6.9: By adjusting the ‘Product or Weight’ input box to ‘Weighted Mean’ and selecting a specific weighting variable we can generate results using Summary Method 2 (a weighted mean).\n\n\n\nWe can apply Summary Method 3 ‘Multiply Joe Model Response Scores and Another Metric to Summarize Results Across Locations’ by setting the ‘Product or Weight’ input select box to ‘Product’ (Figure 6.10). We then need to select our metric that will be used as the weighting variables to multiply scores by. Remember to define the new y-axis units appropriately.\n\n\n\n\n\n\nFigure 6.10: Summary Method 3 ‘Multiply Joe Model Response Scores and Another Metric to Summarize Results Across Locations’.",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Joe Model & Shiny App</span>"
    ]
  },
  {
    "objectID": "06_r_shiny_app.html#download-data",
    "href": "06_r_shiny_app.html#download-data",
    "title": "6  Joe Model & Shiny App",
    "section": "6.7 Download Data",
    "text": "6.7 Download Data\nOn the Download Data page, you can either download the model input parameter files (i.e., the stressor-response workbook, stressor magnitude workbook, spatial polygons file, and life cycle profile) for offline revisions, or you can directly download the CEMPRA, or Life cycle model outputs for reporting purposes.\nModel Parameters: In some circumstances, it may be more convenient to download the stressor magnitude and response Excel workbooks, edit inputs for scenarios offline in Excel or other software and reupload.\nModel Exports: The model results can only be exported after the model is run. Export buttons will be disabled until the Joe Model or life cycle model (population model) has been run.\n\n\n\n\n\n\nFigure 6.11: Download the Data page of the R Shiny Application. 1) Model parameter files for download. 2) Model output files for download (CEMPRA and life cycle model).",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Joe Model & Shiny App</span>"
    ]
  },
  {
    "objectID": "06_r_shiny_app.html#section",
    "href": "06_r_shiny_app.html#section",
    "title": "6  Joe Model & Shiny App",
    "section": "6.8 ",
    "text": "6.8 \n\n\n\n\nCramer, S. P., & Ackerman, N. K. (2009). Linking stream carrying capacity for salmonids to habitat features. American Fisheries Society Symposium, 71, 225–254.",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Joe Model & Shiny App</span>"
    ]
  },
  {
    "objectID": "07_life_cycle_model.html",
    "href": "07_life_cycle_model.html",
    "title": "7  Life Cycle Model (Population Model)",
    "section": "",
    "text": "7.1 Overview\nThe integrated life cycle model is a core component of the CEMPRA tool. The life cycle modeling component is a valuable endpoint to evaluate and understand cumulative effects through the lens of demographic rates and population ecology. Some user groups may be satisfied with the simplified Joe Modelling (stressor roll-up) component of the CEMPRA tool and, therefore, not wish to interact with the life cycle model. However, other user groups may benefit substantially from working with the life cycle modeling component. Framing cumulative effects through an integrated life cycle model allows us to understand critical bottlenecks to the productivity and capacity of a target study system. In the CEMPRA life cycle modeling component, stressor-response relationships are linked to vital rates such as life-stage-specific survivorship, fecundity, and carrying capacity. Therefore, the life cycle modeling component can be used to make relative comparisons between locations (spatial units), scenarios, and stressors to understand limiting factors and design recovery action strategies.\nAt its core, the life cycle modeling component of the CEMPRA tool is a stage-structured matrix model (see (Caswell, 1997)). A simplified life cycle profile csv data input file (described below) is populated by the user and then imported to parameterize and construct components of the matrix model (e.g., number of stages, stage-specific survivorship, years in each stage, etc.).\nWhen the life cycle model is run, a hypothetical population is projected forward in time through simulations. The stage-structured matrix model governs the behavior of the simulated population. Density-dependent growth constraints are implemented using either compensation ratios (if the location and stage-specific capacities are unknown) or location and stage-specific Beverton-Holt functions (discussed further below). Location-specific stressor values will interact with the simulated population to curtail or enhance stage-specific survivorship, fecundity, or habitat capacities. Population projections are then compared across scenarios and/or locations to evaluate the relative change in equilibrium abundance estimates for a target life stage (i.e., carrying capacities) and/or the intrinsic productivity (i.e., growth rates) possible at low densities.\nThe life cycle modeling component of the CEMPRA tool performs a large number of calculations behind the scenes. While convenient, the embedded complexity can create misleading results if input values and assumptions are not carefully considered. It is assumed that users of the life cycle model have an understanding of basic concepts in population ecology (e.g., population growth rates, carrying capacities etc.) and a familiarity with matrix life cycle models. The following resources provide useful refreshers for interested individuals:\nThe model code for the life cycle modeling component of the CEMPRA tool follows a similar structure to the code base used by (Van der Lee & Koops, 2020). The underlying code and assessment framework was modified substantially by Dr. Kyle Wilson and Matthew Bayly (M.J. Bayly Analytics Ltd.) throughout 2022 and 2024. Code snippets, functional forms, and rationale largely follow conventional workflow demographic modeling outlined in (Schaub & Kéry, 2021). For anadromous life cycles with terminal spawners classes, matrix structures follow the generalized design proposed by (Davison & Satterthwaite, 2016). Users are encouraged to review these resources for additional background and rationale.\nLeave questions and comments below (via your GitHub account)",
    "crumbs": [
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Life Cycle Model (Population Model)</span>"
    ]
  },
  {
    "objectID": "07_life_cycle_model.html#overview",
    "href": "07_life_cycle_model.html#overview",
    "title": "7  Life Cycle Model (Population Model)",
    "section": "",
    "text": "Basic refresher on matrix life cycle models: https://compadre-db.org/Education/article/what-is-a-matrix-model\nAn in-depth overview of stage-structured matrix models: https://blog.uvm.edu/tdonovan-vtcfwru/files/2020/06/12-Donov-pages-322-CB.pdf\nDensity-dependent and density-independent constraints on population growth: https://www.nature.com/scitable/knowledge/library/population-limiting-factors-17059572/\nDensity-dependent growth functions (review section on the Beverton-Holt function): http://courses.ecology.uga.edu/ecol4000-fall2018/wp-content/uploads/sites/22/2018/08/Chapter-3-complex-dynamics.pdf",
    "crumbs": [
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Life Cycle Model (Population Model)</span>"
    ]
  },
  {
    "objectID": "07_life_cycle_model.html#data-input-life-cycle-profiles",
    "href": "07_life_cycle_model.html#data-input-life-cycle-profiles",
    "title": "7  Life Cycle Model (Population Model)",
    "section": "7.2 Data Input: Life Cycle Profiles",
    "text": "7.2 Data Input: Life Cycle Profiles\n\n7.2.1 Purpose\nThe life cycle profile is the main input file for the life cycle model. It provides the names and values of key life cycle parameters and vital rates, including parameters for survival, growth, reproduction, and density-dependent effects. This file makes it easy for users to store and edit life cycle parameter values either within or outside of the R Shiny web application. The following sections break down the components of the life cycle profile file with illustrative examples. The intent of the following sections is to provide a detailed explanation of how the life cycle model works with a description of each component of the input file so that users may create their own life cycle profile for a target species of interest.\n\n\n7.2.2 Layout\nThe life cycle profile is a comma-separated values (CSV) file that contains the names and values of each of the parameters within the life cycle model. Life cycle profiles will be unique to each species or life history variant. The life cycle profile file contains three columns:\n\nParameters: The full name/description of the parameter. This column can be adjusted by the user to provide more relevant nicknames for each stage (e.g., fry survival, smolt survival etc.). Please update and change these values for your study system.\nName: The short form name of the parameter used in the model. The names of these parameters are referenced by the model code and should not be modified (apart from adding or removing stage classes). Feel free to add or remove rows, depending on the number of stages, but do not change the text in this column.\nValue: The numeric value of the parameter used in the model. The values are adjusted for each species profile.\n\nThe following table shows an example life cycle parameters file for Athabasca Rainbow Trout (non-anadromous).\n\nExample life cycle parameters file for Athabasca Rainbow Trout (non-anadromous)\n\n\n\n\n\n\n\nParameters\nName\nValue\n\n\n\n\nNumber of life stages\nNstage\n4\n\n\nAnadromous\nanadromous\nFALSE\n\n\nAdult capacity\nk\n100\n\n\nSpawn events per female\nevents\n1\n\n\nEggs per female spawn\neps\n3000\n\n\nspawning interval\nint\n1\n\n\negg survival\nSE\n0.1\n\n\nyoy survival\nS0\n0.3\n\n\nsex ratio\nSR\n0.5\n\n\nHatchling Survival\nsurv_1\n0.3\n\n\nJuvenile Survival\nsurv_2\n0.3\n\n\nSub-adult Survival\nsurv_3\n0.9\n\n\nAdult Survival\nsurv_4\n0.9\n\n\nYears as hatchling\nyear_1\n1\n\n\nyears as juvenile\nyear_2\n2\n\n\nyears as subadult\nyear_3\n2\n\n\nyears as adult\nyear_4\n5\n\n\negg survival compensation ratio\ncr_E\n1\n\n\nyoy survival compensation ratio\ncr_0\n3\n\n\nhatchling survival compensation ratio\ncr_1\n2.5\n\n\njuvenile survival compensation ratio\ncr_2\n2\n\n\nsubadult survival compensation ratio\ncr_3\n1.1\n\n\nadult survival compensation ratio\ncr_4\n1\n\n\nmaturity as hatchling\nmat_1\n0\n\n\nmaturity as juvenile\nmat_2\n0\n\n\nmaturity as subadult\nmat_3\n0\n\n\nmaturity as adult\nmat_4\n1\n\n\nvariance in eggs per female\neps_sd\n1.00E+03\n\n\ncorrelation in egg fecundity through time\negg_rho\n0.1\n\n\ncoefficient of variation in stage-specific mortality\nM.cv\n1.00E-01\n\n\ncorrelation in mortality through time\nM.rho\n0.1",
    "crumbs": [
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Life Cycle Model (Population Model)</span>"
    ]
  },
  {
    "objectID": "07_life_cycle_model.html#matrix-life-cycle-model",
    "href": "07_life_cycle_model.html#matrix-life-cycle-model",
    "title": "7  Life Cycle Model (Population Model)",
    "section": "7.3 Matrix Life Cycle Model",
    "text": "7.3 Matrix Life Cycle Model\nThe stage-structured matrix modelling framework, embedded within the CEMPRA tool, can be represented graphically by a life cycle diagram (figure) or a transition matrix. The transition matrix can be represented symbolically with either equations (Table 1) or absolute values (Table 2). The structure of the life cycle diagram and transition matrix will be different depending on whether the anadromous input is set to TRUE (for anadromous life histories e.g., salmon) or FALSE (for non-anadromous life histories e.g., most trout).\nThe life cycle diagram figure (below) shows stage class transitions for Athabasca Rainbow Trout. In the diagram and input file, we see that there are four main stages (stage_1 to stage_4). stage_1 individuals can become stage_4 individuals after three years in the simulation, but it is also possible for some individuals to spend more than one year in stages 2, 3, and 4 (denoted by the circular loop). We also see that stage_4 individuals are sexually mature and have the capacity to generate new stage_1 individuals. There are also special year 0 (Age-0) events that occur before new stage_1 (Age-1) individuals are secured in the simulation. These events include egg survival (SE) and Age-0 fry survival (S0).\n\n\n\nSamle life cycle diagram for Athabasca Rainbow Trout.\n\n\nThe life cycle modelling component of the CEMPRA tool is set up as a pre-birth pulse census (see Caswell 2000). Since the design of stage-structured matrix models does not easily allow for the initial number of eggs and fry to be represented as independent matrix elements (cells), their transitions are included within the fecundity term. In a pre-birth pulse census, we assume that the demographic census takes place immediately before spawning (fecundity), meaning that yearlings of the previous spawning year have survived a full time-step (Age-0/stage-0 to Age-1/stage-1). Yearlings (Age-0: egg & fry) must survive the entire census period to the start of the next census. Therefore, the Age-0 transitions (egg-to-fry survivorship: SE and fry-to-parr survivorship: S0) are accounted for within the fecundity element (cells) of the transition matrix (Table 1).\n\n7.3.1 Anadromous Life Histories\n\nParameter in the life cycle parameters file to trigger the anadromous life history. To use the anadromous life history schedule you must add a row with the parameter name anadromous and then set the value to TRUE. If the anadromous parameter is not specified or missing/excluded from the life cycle parameters inputs file the CEMPRA toolbox will assume that the population is not anadromous.\n\n\nParameter\nName\nValue\n\n\n\n\nAnadromous\nanadromous\nTRUE\n\n\n\nFor semelparous species (such as salmon) we need to impose a slightly different structure to accurately represent a terminal spawner class (B) with death upon reproduction. This can become challenging because we need to also account for the fact that some species such as Coho Salmon, Chinook Salmon, Steelhead etc. will choose to return to spawn at different ages. For example, some Chinook Salmon will return to spawn at age-3, age-4, or age-5 (and sometimes even later). Therefore, the matrix structure needs to represent a dual track for breeders (B) that return to spawn and pre-breeders (P) that remain at sea (or elsewhere) for continued growth. Elegant solutions have been proposed by (Davison & Satterthwaite, 2016) (and others) to achieve this.\nThe diagram below illustrates the anadromous life history diagram for Chinook Salmon. In this diagram, there are two pathways available to individual age-2 fish transitioning to age-3 fish. Individuals may return for spawning as breeders (B) (orange boxes) or remain in the marine environment as pre-breeders (Pb) (light blue boxes) for additional years. Pre-breeder (Pb) age classes can have interannual survivorship estimates &gt;0 (to advance fish to older cage classes) but all spawner classes (B-breeders) will die after spawning. The probability of becoming a spawner (at age 3-5) will depend on the portion that become mature at each age class (mat_x). For example, the transition from age-2 (Pb - prebreeders) to age-3 spawners (B - breeders) will be expressed as the baseline marine survivorship from age-2 to age-3  (surv_2) multiplied by the portion of fish that spawn at age-3 (mat_3). Additional migratory mortality for age-3 fish returning to spawn can expressed as (smig_3). Alternatively, age-2 fish can remain at sea for another year to enter the age-3 pre-breeder marine class (stage_Pb_3). This marine transition (stage_Pb_2 to stage_Pb_3) will be expressed as the baseline age-2 to age-3 marine survivorship (surv_2) * the portion of fish that do not spawn at age-3 (1 – mat_3). The cycle repeats itself until the final transition from age-4 to age-5. We assume that age-5 is the maximum possible age any fish can achieve. mat_5 is set 1.0 (100% of remaining individuals return to spawn). No fish will enter into the class (stage_Pb_5 – not shown). We can also set surv_5 to 0, but doing so is not necessary if mat_5 is set to 1.0.\nRecruitment of one-year-old fish (stage_Pb_1) is a function of the number of spawners of a given age class (e.g., stage_B_x) multiplied by the average pre-spawn mortality of that age class (u_x), the average fecundity (eggs per female spawner, eps) for that age class (eps_x), the sex ratio (portion female, SR), the average egg survivorship (SE), and finally the average fry survivorship (S0). We can assume the spawning events (events) and interval (int) are both set to 1.0. Therefore, the number of stage_Pb_1 recruits from age-3 spawners would be expressed as (μ_3 * events * eps_3 * SE * s0 * SR)/int.\nThis diagram can be restructured for Coho, Steelhead, Coastal Cutthroat etc. by adjusting vital rates and then adding or removing age class maturity schedules (see examples at the end of this chapter). We strongly recommend that all implimentations of the CEMPRA anadromous life cycle model for salmon develop an age-based matrix model (Leslie Matrix Models) as a opposed to a stage-based matrix model. We have found that these are less prone to misinterpretations and easier to diagnose.\n\n\n\nGeneralized life history stage class transition diagram for anadromous species (example for Chinook Salmon)\n\n\n\n\n7.3.2 Vital Rates for Survivorship and Growth\nThe CEMPRA tool’s “pre-birth pulse” census assumes that the demographic census occurs just before spawning. This means that individuals counted as yearlings (from the previous spawning season) have already survived one full time-step—from birth (Age-0/Stage-0) to Age-1/Stage-1.\nDuring the first year, two survival rates apply:\nSE: Egg survivorship. S0: Sub-yearling (fry) survivorship. Their product (SE × S0) represents the overall early-life survival (surv_0, although it isn’t explicitly modeled).\nOnce individuals reach Age 1 (Stage 1), the parameter surv_1 governs the density-independent transition to Stage 2. For most anadromous species, which migrate to sea shortly after spawning, surv_1 should be calculated as the product of smolt survivorship and the survival rate during the first several months at sea (up to the individual’s second birthday). For species/life histories that reside in the freshwater environment for longer (e.g., Coho & stream-type Chinook), surv_1 can be adjusted to represent yearling/parr survivorship.\nThe following table lists the vital rates for survivorship and growth:\n\n\n\n\n\n\n\nParameter\nDescription\n\n\n\n\nNstage\nThe number of stages in the transition matrix (excluding Stage-0/Age-0).\nFor non-anadromous species: Each stage must span one or more years in the life cycle. In the reference example, there are four stages: stage_1, stage_2, stage_3, and stage_4.\nFor anadromous species we must assume each year is one stage. In the previous example with Chinook salmon the max age is 5, so there are 5 stages. Do not double-count spawning and non-spawning sub-classes.\n\n\nsurv_1\nsurv_2\nsurv_3\nsurv_…\nMean annual survivorship of individuals in for each stage transition (e.g., surv_1 is the survival of transitioning from stage 1 to stage 2; surv_2 is the survival from stage 2 to stage 3.\nCreate new rows in the life cycle parameter csv file so that surv_1, surv_2, surv_3, etc. extends to the Nstage.\nSimilarily delete rows if Nstage is lower that the default csv file. These survivorship estimates should be estimates of intrinsic density-independent survival (in the absence of density-dependent constraints).\n\n\nyear_1\nyear_2\nyear_3\nyear_…\nThe number of years spent in each stage (e.g., year_2 is the number of years spent in stage class 2). Usually these values will all be 1 (one stage = one year). However, individuals in the simulation can spend more than one year in each stage. In the example input file, mature adults can spend up to five years in stage_4. If we were to set the year values to 1 for all stages, then we would have an age-based Leslie matrix model. If additional stages are added (or removed), be sure to modify rows in the life cycle profile CSV file accordingly (i.e., delete or add new rows to match Nstage).\n\n\nSE\nEgg survivorship (density-independent).\n\n\nS0\nAge-0 fry or sub-yearling survivorship (density-independent).\n\n\n\nTable: Vital rates for survivorship and growth in the life cycle model.\nEnsure that all survivorship estimates represent hypothetical density-independent survivorship in the absence of density-dependent constraints. Density-dependent survivorship is accounted for in the next section. If density-independent survivorship is unknown, but strong, density-dependent constraints are to be included in the species profile, then it might be possible to simply set the density-independent survivorship estimate to a value close to 1.0 (e.g., S0: 0.999).\nFor fecundity, we have to consider the proportion of each age class that is sexually mature (mat), the proportion of the population that is female (SR: 0.5), the fecundity (eps: eggs per spawner) per spawning event, the spawning events per year (events), and the spawning interval (int). The calculation of individuals in stage class 1 (stage_1) also must account for the Age-0 survivorship of eggs and fry.\nSample fecundity function for stage class 4:\n\n\n\nSample fecundity function for non-anadromous simulations\n\n\n\n\n7.3.3 Vital Rates for Fecundity\nThe following table lists the vital rates for fecundity:\n\n\n\n\n\n\n\nParameter\nDescription\n\n\n\n\nmat_1\nmat_2\nmat_3\nmat_…\n(1 to Nstage)\nThe proportion of each stage class that is sexually mature (0 – 1). For example, in the demo species profile, 100% of the individuals become sexually mature at stage class 4, and the sexual maturity is 0% for all other stage classes. It is also possible for a stage class to have partial maturity (e.g., 0.85). If the Nstage value is different than four, then add or remove rows in the species profile so that the number of mat values matches the number of stage classes (Nstage value).\nAnadromous simulations: For some anadromous species such as Chinook salmon, individuals will generally return to spawn between age-3 and age-6. Different populations will have different maturity schedules (e.g., 15% age-3, 70% age-4, 100% age-5 etc.). These values do not need to sum to 100% but age-specific maturity is simply the probability that an individual will become sexually mature and return to spawn at a given age. For anadromous species the oldest age class should have a maturity of 100%, meaning that 100% of individuals at that age class will be ready to spawn.\n\n\nevents\nSpawning events per female per year. This parameter will almost always be set to 1 for most species to indicate one spawning event per year per mature female. Even for populations with complex life history variants (e.g., systems with both Spring Chinook & Fall Chinook), we still recommend keeping this value at one and using two different species profiles to represent each life history variant.\n\n\nFixed Fecundity:\neps\nStage-specific Fecundity (anadromous):\neps_3\nesp_4\neps_5\neps_…\nEggs per spawning female (eps). The mean fecundity per female per spawning event.\nAnadromous simulations: For most species we can simply enter an estimate of the mean eggs per female spawner as a fixed global value (e.g., 500 eggs/spawner). However, for some species we may wish to enter in a separate fecundity value for each stage/age class (e.g., Age-3 spawners, eps_3: 3,700; Age-4 spawners, 4,200 eggs/spawner; Age-5 spawners, 5,000 eggs/spawner).\nIf you choose to enter in age/stage-specific fecundity estimates please delete the row for ‘eps’. If you choose to enter in a fixed global fecundity then delete the age-specific fecundity estimates. Currently age-specific fecundities only works for anadromous simulations.\n\n\nSR\nThe sex ratio is represented as the proportion of the population that is female. This value will almost always be set to 0.5 to indicate an equal proportion of males and females in the population.\n\n\nint\nSpawning interval (in years). This value will also be set to 1 for most species, indicating that mature individuals spawn each year. Proceed with caution if you choose to use a value other than 1 for this input (see details in formulas).\n\n\nsmig_3\nsmig_4\nsmig_5\n…\n(Spawner migration Survivorship Rates: Anadromous simulations only)\nSpawner migration survivorship rates for each age class. For example, smig_4 is migratory survivorship for age-4 spawners. These parameters act as a survivorship multiplier. If the spawner migration mortality is 10% then smig_4 should be input as 0.9 (1 - 0.1). These values can be set to 1.0 for initial model setup. Similar to other input parameters check the Nstage value and add or remove rows so that smig_3, smig_4, smig_5 entries are present for each of the mature age classes (anywhere where mat_x is set and is greater than zero).\n\n\nu_3\nu_4\nu_5\nu_…\n(Prespawn Survivorship Rates: Anadromous simulations only)\nPrespawn survivorship rates for each age class. For example u_4 is pre-spawn survivorship for age-4 spawners. These parameters act as a survivorship multiplier. If the prespawn mortality is 10% then u_4 (prespawn survivorship) should be input as 0.9 (1 - 0.1). These values can be set to 1.0 for initial model setup. Similar to other input parameters check the Nstage value and add or remove rows so that u_3, u_4, u_5 entries are present for each of the mature age classes (anywhere where mat_x is set and is greater than zero).\n\n\n\nTable: Vital rates for fecundity in the life cycle model.",
    "crumbs": [
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Life Cycle Model (Population Model)</span>"
    ]
  },
  {
    "objectID": "07_life_cycle_model.html#matrix-representations",
    "href": "07_life_cycle_model.html#matrix-representations",
    "title": "7  Life Cycle Model (Population Model)",
    "section": "7.4 Matrix Representations",
    "text": "7.4 Matrix Representations\n\n7.4.1 Iteroparous (Non-anadromous) Species\nWe can combine all parameters discussed in this section along with the example species profile to construct a symbolic (mathematical) representation of the transition matrix (Table 1). The stage-to-stage transitions account for the probability of staying within each stage or advancing to the next stage based on the surv_X and n-year spent within a stage year_X. The fecundity element of the matrix (top row) includes elements for fecundity and Age-0 survivorship.\n\nTable 1. Symbolic Representation of the Transition Matrix for non-anadromous species\n\n\n\n\n\n\n\n\n\n\n\nstage_1\nstage_2\nstage_3\nstage_4\n\n\n\n\nstage_1\nsurv_1 * (1 - surv_1^( year_1 - 1))/(1 - surv_1^ year_1)\n(mat2 * events * eps * sE * s0 * sR)/int\n(mat3 * events * eps * sE * s0 * sR)/int\n(mat4 * events * eps * sE * s0 * sR)/int\n\n\nstage_2\nsurv_1 - surv_1 * (1 - surv_1^(year_1 - 1))/(1 - surv_1^ year_1)\nsurv_2 * (1 - surv_2^( year_2 - 1))/(1 - surv_2^ year_2)\n0\n0\n\n\nstage_3\n0\nsurv_2 - surv_2 * (1 - surv_2^( year_2 - 1))/(1 - surv_2^ year_2)\nsurv_3 * (1 - surv_3^( year_3 - 1))/(1 - surv_3^ year_3)\n0\n\n\nstage_4\n0\n0\nsurv_3 - s3 * (1 - surv_3^( year_3 - 1))/(1 - surv_3^ year_3)\nsurv_4 * (1 - surv_4^( year_4 - 1))/(1 - surv_4^ year_4)\n\n\n\n\nDo individuals spend more than one year in each stage?\nThe stage-to-stage transition probabilities are also expressed as functions from surv_X (annual survivorship with stage X) and year_X (number of simulation years within stage X). surv_X is the total annual probability of survival (i.e., regardless of staying within the current stage OR advancing to the next subsequent stage). The example below illustrates how the combined probability of staying within a stage or advancing to the next stage always equals surv_X regardless of n-years in each stage. Note that the sum of the yellow cells equals 0.6 (for both fates of staying within stage or advancing to the next stage).\n\n\n\nStage-to-stage transition probabilities\n\n\nWe can continue with the working example to represent the transition matrix numerically (Table 2). The fecundity element for stage_4 is set at 45 since it accounts for the vital rates relating to maturity and Age-0 survivorship.\nNet Fecundity (stage-4) = (mat4 * events * eps * sE * s0 * sR)/int\n45 = (1 * 1 * 3,000 * 0.1 * 0.3 * 0.5)/1\n\nTable 2. Numerical representation of the transition matrix\n\n\n\n\nstage_1\nstage_2\nstage_3\nstage_4\n\n\n\n\nstage_1\n0\n0\n0\n45\n\n\nstage_2\n0.3\n0.231\n0\n0\n\n\nstage_3\n0\n0.069\n0.474\n0\n\n\nstage_4\n0\n0\n0.426\n0.756\n\n\n\n\nThe derived lambda value of the projection matrix (intrinsic rate of growth) in this example species profile is 1.21 (above 1.0), meaning that the population will continue to grow exponentially in the absence of density-dependent constraints.",
    "crumbs": [
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Life Cycle Model (Population Model)</span>"
    ]
  },
  {
    "objectID": "07_life_cycle_model.html#density-dependent-constraints-on-growth",
    "href": "07_life_cycle_model.html#density-dependent-constraints-on-growth",
    "title": "7  Life Cycle Model (Population Model)",
    "section": "7.5 Density-Dependent Constraints on Growth",
    "text": "7.5 Density-Dependent Constraints on Growth\nIt is rare for natural populations to grow in perpetuity without any constraints on growth, survival, and reproduction. Therefore, life cycle models will typically include a mechanism (or multiple mechanisms) to constrain population growth or limit high densities. We refer to these as density-dependent bottlenecks on population growth.\nStressor-response relationships can be incorporated into the life cycle model without accounting for density-dependent constraints, but the interpretation of the results will be limited to eigen analyses of intrinsic growth rates and sensitivities/elasticities assessments (e.g., comparing lambda values & productivity). While usefule, these outputs are sometimes difficult to communicate to diverse working groups, and they may also be misleading, especially if habitat is limited. If there are key demographic bottlenecks in the life cycle, then a density-independent model may inappropriately lead users to focus on stressors linked to fecundity or early life-stage survivorship before a key bottleneck (e.g., egg-to-fry survivorship) is experienced. However, if (in reality) a population experiences strong density-dependent constraints on growth, then factors limiting habitat availability or productivity of a key life stage will become more influential. A common example of density-independent and density-dependent constraints on growth can be found in the transition between the early life stages of Steelhead (Oncorhynchus mykiss) as individuals transition from egg-to-fry (a density-independent life stage) and then from fry-to-smolts/parr (a density-dependent life stage) (Ward & Slaney, 1993).\nThe life cycle modeling component of the CEMPRA tool has two (optional) mechanisms to incorporate density-dependent growth constraints. One mechanism makes use of adult carrying capacity and compensation ratios (discussed below), while the second mechanism considers stage and location-specific carrying capacities. Incorporating density-dependent constraints with compensation ratios is convenient because users can evaluate projections in the population model without specifying location-specific habitat availability estimates. However, in most cases incorporating density-dependent constraints with stage and location-specific carrying capacities can provide a more intuitive workflow.\nWe strongly recommend starting with life stage-specific density dependent bottlenecks (e.g., a location is expected to support up to X fry, Y parr, and Z spawners based on habitat availability). Avoid the use of compensation ratios unless you are already familiar with their application in population ecology (most users will tend to find working with compensation ratios a little bit more advanced and sometimes non-intuitive).\nBoth mechanisms of density-dependent constraints utilize the Beverton-Holt function or strict “hockey stick” fixed threshold to constrain the transition probability of key demographic bottlenecks. The Beverton-Holt function calculates the expected number of individuals in the next time step (N at time + 1, or density) as a function of the number of individuals in the current time step (N at time). In the case of stage-structured matrix models, this relationship is expressed as the number of individuals transitioning between two stages (e.g., from stage 2 to stage 3). In the Beverton-Holt function, input parameters governing this relationship include an estimate of stage-specific carrying capacity (K), a baseline estimate of density-independent survival (S) (surv_X from the species profile) for the transition probability, and the number of individuals in the current stage class (Nt) for the simulation year.\n\n\n\nBeverton-Holt function for density-dependent growth\n\n\nThe following figure provides an overview of the Beverton-Holt function, showing the number of individuals at time (t) on the x-axis and the number of individuals at time + 1 on the y-axis. For example, this could be the number of Age-0 fry on the x-axis and the number of Age-1+ parr recruits on the y-axis. The curved black line shows the effects of density-dependent growth (limited recruitment as the number of individuals in the first stage is increased). The steep red line is the intrinsic productivity (survivorship, surv_X), which is 0.8 under hypothetical density-independent growth conditions. The blue line is the hypothetical carrying capacity of 100. The “hockey stick” style density dependent method simply applies the horizontal blue dotted line as a fixed threshold that cannot be exceeded.\n\n\n\nBeverton-Holt function for density-dependent growth\n\n\n\nBeverton-Holt function for density-dependent growth shows the survivorship under density-independent growth (red line), the maximum carrying capacity (blue line), and the resulting relationship from the BH curve (black line).\n\n\n7.5.1 Location and Stage-Specific Carrying Capacities\nFor more systems with some habitat data and known relationships between habitat availability and maximum densities, it is possible to use location-specific carrying capacities for one or more rate-limiting life stages (e.g., Location X can produce up to 1,200 parr). If this is the case, a special table can be included that specifies the maximum number of individuals per stage class per life stage per location:\n\n\n\nLocation and stage-specific carrying capacity input data table\n\n\n\nLocation and stage-specific carrying capacity input data table.\n\nThis table (Location-specific capacities) is referred to as the locations carrying capacity table and exists as a special input file that can be used to control density-dependent growth in the life cycle model. Users must estimate the average carrying capacity for a given life stage at each location (e.g., k_stage_1_mean: 1,200) and (optionally) the interannual variability (CV: coefficient of variation) in the carrying capacity (e.g., k_stage_1_cv: 0.1). If the location carrying capacity table is provided, any cells that are populated with values are assumed to have density-dependent constraints. Any cells that are left blank are assumed to be governed only by density-independent factors and do not have any density-dependent constraints.\nIn the previous example (Location-specific capacities), the population model will run with constraints on stage_1, meaning that the survivorship from stage_0 to stage_1 will be governed by a Beverton-Holt relationship, and the abundance (or density) of stage_1 individuals will be constrained for each location according to the values provided in the locations carrying capacity table.\nThe CEMPRA tool does not support the development of these locations and stage-specific carrying capacity estimates, but it’s assumed that relevant reference literature will be used to develop appropriate input values (e.g., if stage 1 is Steelhead parr; regional densities for Steelhead parr are roughly 1,500 parr/km of stream; and fish-accessible reaches within Rock Creek sum up to roughly 800m in length; then k_stage_1_mean should equal roughly 1,200 parr). Developing these estimates alongside a species profile is generally case-specific, but the advantage is that projection from the CEMPRA tool will ultimately account for habitat quality and habitat availability.\nFor support on estimating upper capacities limits for trout and salmonids in streams from basic habitat data see (Cramer & Ackerman, 2009) (Beechie et al., 2021). Other reports can be referenced to estimate capacities in estuaries (e.g., (Chen, 2024)) and lakes (e.g., for Sockeye see: (Cox-Rogers et al., 2010), many other examples exist). To get started we suggest reviewing this great overview video by Nick Ackerman https://www.youtube.com/watch?v=oSYapG2o4bc. Most capacity-estimation methods focus on lotic habitats, breaking systems into reaches (e.g., Reach 1, 2, 3) or habitat units such as pools, riffles, and runs. This framework works well for species like Coho, Chinook, Bulltrout, and Steelhead, etc. which rely heavily on stream habitats throughout much of their freshwater life cycle. However, Sockeye differ fundamentally because their spawning and juvenile rearing depend primarily on large lake ecosystems, & only pass through stream reaches. Therefore for Sockeye and other lentic species, it is therefore more appropriate to define model ‘locations’ at the scale of lakes or major basins, and to estimate capacity based on lake productivity and rearing potential rather than reach-scale stream habitat metrics. Stream reaches still matter, particularly for out-migration bottlenecks, migration survival, and tributary spawning where it occurs, but they should be treated as stressors or modifiers, not as the primary units of capacity. We recommend spending time here as group defining the best approach before proceeding with the rest of the modeling.\nIf the locations carrying capacity table is provided, the population projections will implement density-dependent growth constraints for species-specific life stages according to the stage-specific carrying capacities (with Beverton-Holt constraint on growth or a fixed Hockey-stick style upper capacity threshold), and intrinsic density-independent survivorship estimates. The Steelhead spawners figure shows an example simulation for Steelhead from the CEMPRA tool with adult spawning on the y-axis and a stage-1 (parr) carrying capacity constraint set to 160,000 individuals. In the Steelhead example, the only density-dependent constraint is the parr carrying capacity of the system (set to 160,000). The number of adult spawners is, therefore, a derived metric from the life cycle model. Implementing density-dependent constraints with location and stage-specific carrying capacities is different from the approach with compensation ratios, where users are required to first input an estimate of the adult carrying capacity and work backwards from there.\n\n\n\nSimulation of Steelhead Spawners with stage_1 capacity set to 160,000\n\n\n\nSimulation of Steelhead Spawners (y-axis) with stage_1 (parr) capacity set to 160,000.\n\n\n7.5.1.1 Step 1: Indentify Which Life Stages Have Denisty-Dependent Bottlenecks\nFirst we identify which life stages have density-dependent bottlenecks and we define these in the life cycle profile csv file. These are generally added to the bottom of the life cycle parameters csv file. This will tell the model where to apply density-dependent bottlenecks and which functions to use.\nFor Non-anadromous Populations like Rainbow, Bull Trout, Cuttroat, Steelhead etc.\nFor non-anadromous (iteroparous) populations of resident trout, spawning more than once in their life cycle, the following density-dependent tags are available. Add these to the bottom of the life cycle profile csv in the Name column and set Value to TRUE.\n\n\n\n\n\n\n\n\nName\nMechanism\nDescription\n\n\n\n\nbh_stage_0\nBeverton–Holt\nEgg-to-fry transition limiting the maximum number of fry.\n\n\nhs_stage_0 / dd_hs_0\nHockey-Stick\nEgg-to-fry hard cap limiting the maximum number of fry.\n\n\nbh_stage_1, bh_stage_2, …\nBeverton–Holt\nStage transitions limiting the maximum number of individuals at that stage with a Beverton–Holt function. For example, bh_stage_1 will limit the maximum number of age-1 individuals (i.e., the fry to parr transition).\n\n\nhs_stage_1, hs_stage_2, …\nHockey-Stick\nSame as above but with a hockey-stick style hard cap. For example, hs_stage_1 will be applied at the fry to age-1 transition limiting the number of stage 1 individuals (e.g., fry to parr). hs_stage_2 will limit the stage 1 to stage 2 transition and limit the number of stage 2 individuals.\n\n\nbh_spawners\nBeverton–Holt\nTotal spawner capacity. Will limit the number of adults across all spawning stage classes (references maturity probability to determine spawner vs non-spawner).\n\n\nhs_spawners\nHockey-Stick\nTotal spawner cap. Same as above, but with fixed upper limit as a hard stop threshold.\n\n\n\nFor Anadromous Populations like Chinook, Coho, Sockeye, Chum, Pink etc.\nFor anadromous (semelparous) populations of salmon, spawning only once in their life cycle and then dying, the following density-dependent tags are available. Add these to the bottom of the life cycle profile csv in the Name column and set Value to TRUE. The tags are similar to the above tags for non-anadromous life history profiles but we must include define pb (for pre-breeder) vs b (for breeder), becomes more important for later life stages.\n\n\n\n\n\n\n\n\nName\nMechanism\nDescription\n\n\n\n\nbh_stage_0\nBeverton–Holt\nEgg-to-fry transition limiting the maximum number of fry (this tag is the same for non-anadromous and does not need ‘pb’ or ‘b’ to be specified).\n\n\nhs_stage_0\nHockey-Stick\nEgg-to-fry hard cap limiting the maximum number of fry (this tag is the same for non-anadromous and does not need ‘pb’ or ‘b’ to be specified).\n\n\nbh_stage_pb_1, bh_stage_pb_2, …\nbh_stage_b_1, bh_stage_b_2, …\nBeverton–Holt\nStage transitions limiting the maximum number of individuals at that (pb - pre-breeder) stage with a Beverton–Holt function. For example, bh_stage_pb_1 will limit the maximum number of age-1 individuals (i.e., commonly used for the fry to parr transition to limit the number of parr).\nThe ‘pb’ tag indicates that the constraint will be applied to the pre-breeder stage class, while the ‘b’ tag indicates that the DD constraint will be applied to a specific spawner stage class. The latter is somewhat awkward for populations with multiple spawner stage classes, so ‘bh_spawners’ was included for convenience (see below)\n\n\nhs_stage_pb_1, hs_stage_pb_2, …\nhs_stage_b_1, hs_stage_b_2, …\nHockey-Stick\nSame as above but with a hockey-stick style hard cap. For example, hs_stage_pb_1 will be applied at the fry to age-1 transition limiting the number of stage 1 individuals (e.g., fry to parr). hs_stage_pb_2 will limit the stage 1 to stage 2 transition and limit the number of stage 2 individuals.\n\n\nbh_spawners\nBeverton–Holt\nTotal spawner capacity. Will limit the number of adults across all spawning stage classes (references maturity probability to determine spawner vs non-spawner).\nUse this to apply a density-dependent constrain on adult spawners (pooled across spawner age classes).\n\n\nhs_spawners\nHockey-Stick\nTotal spawner cap. Same as above, but with fixed upper limit as a hard stop threshold.\n\n\n\nSelect Target Density-Dependent Bottlenecks and Update the Life Cycle Profile File.\nWe then need to select target density-dependent bottlenecks of interest (from the name tags above) and update the life cycle profile file to tell the model which life stages have density-dependent constraints and which functions to use (e.g., bh vs hs).\nThe file life cycle profile files should look something like this. Use the exact naming convention in the Name column, set the Value column to TRUE and provide a custom entry in the Parameters column as a user-friendly reminder of which life stage the density-dependent constraint is being applied to.\n\n\n\nUpdated life cycle profile file for a non-anadromous population with several density-dependent functions added to the model\n\n\n\n\n\nUpdated life cyle profile csv file for an anadromous species with three density-dependent functions added to the model.\n\n\n\n\n7.5.1.2 Step 2: Create the Location-Specific Habitat Capacities File\nIn the previous step we told the model which life stages have density-dependent constraints and which density-dependent functions to use, but will still need to specify the location-specific K (capacity) values for each life stage. For example, if we know we have density-dependent constraints on egg-to-fry, fry-to-parr, and spawners, we need to specify the upper carrying capacities for each of fry, parr, and spawners for each location. We enter this information in the habitat capacities file.\nThe habitat capacities file can be generated as an Excel or csv file and defines the upper carrying capacity for each location (as rows) and each life stage at the target location (column values). The habitat capacities file always begins with columns HUC_ID (location id) and NAME (location or reach name), and then includes a series of wildcard columns that define the maximum number of individuals that the location is able to support for that life stage. See the examples below:\nExample Habitat Capacities File for a Non-Anadromous Population\n\n\n\n\n\n\n\n\n\n\nHUC_ID\nNAME\nk_stage_0_mean\nk_stage_1_mean\nk_stage_3_mean\n\n\n1\nReach 1\n627,594\n238,987\n38,073\n\n\n2\nReach 2\n1,247,555\n537,196\n15,384\n\n\n3\nReach 3\n913,589\n359,136\n20,943\n\n\n\nIn the previous table we have the HUC_ID & NAME columns for the location - to link information to the stressor data, and then we have a series of additional columns:\n\nk_stage_0_mean: defines the carrying capacity K for stage_0 (fry) at the location. In this case it is set to 627,594 for reach 1. If we defined the density-dependent function in the life cycles file ‘hs_stage_0’ to TRUE, then the simulated population would be restricted to fry abundance to &lt;627,594 at location 1, regardless of the productivity.\nk_stage_1_mean: We also include values for stage_1 capacity (K) limits. In this example this constraints corresponds to the parr carrying capacity. If we set ‘hb_stage_1’ to TRUE in the life cycle file then the values in this column would create a bottleneck at the fry to parr transition and restrict the number of stage 1 individuals.\nk_stage_3_mean: Similar to above this column will control the number of stage_3 individuals. Likely a stage representing adults.\n\nWe can also add additional columns for k_stage_4_mean etc. provided that they are defined in the life cycles file. Next we show an example for an anadromous population.\nExample Habitat Capacities File for an Anadromous Population\n\n\n\n\n\n\n\n\n\n\nHUC_ID\nNAME\nk_stage_0_mean\nk_stage_Pb_1_mean\nk_spawners_mean\n\n\n1\nReach 1\n627,594\n\n38,073\n\n\n2\nReach 2\n1,247,555\n\n15,384\n\n\n3\nReach 3\n913,589\n\n20,943\n\n\n\nIn the previous table we have the HUC_ID & NAME columns for the location - to link information to the stressor data, and then we have a series of additional columns. These are similar to but slightly different than the non-anadromous populations because we need to specify Pb (pre-breeder) vs B (breeder):\n\nk_stage_0_mean: defines the carrying capacity K for stage_0 (fry) at the location. In this case it is set to 627,594 for reach 1. If we defined the density-dependent function in the life cycles file ‘hs_stage_0’ to TRUE, then the simulated population would be restricted to fry abundance to &lt;627,594 at location 1, regardless of the productivity. We do not need to define pb/b for the fry stage class.\nk_stage_Pb_1_mean: We also include values for stage_1 capacity (K) limits. In this example this constraints corresponds to the parr carrying capacity. The ‘Pb’ applies to the pre-breeder stage class in the anadromous model. If we set ‘hs_stage_pb_1’ to TRUE in the life cycle file then the values in this column would create a bottleneck at the fry to parr transition and restrict the number of stage 1 individuals.\nk_spawners_mean: Here we specify the carrying capacity for adult spawners across all age classes (alt column names like k_stage_b_mean will also work). This column will control the maximum number of spawners pooled across all spawner age classes. You can also specify capacities for spawner age classes individually (e.g., k_stage_B_4_mean, k_stage_B_5_mean, etc.) but that can get tricky since it assumes the portions are well-known and consistent.\n\nNote that the values in the column are empty - if no data is available then the model will be run with capacity set in Inf for that life stage.\n\n\n7.5.1.3 Step 3: Final Checks\n\nDefine stage/age classes with known or expected density dependent constraints\nUpdate the life cycle profile file to include target density dependent bottlenecks with their associated functions (e.g., hs_stage_0, bh_spawners etc.). Set the Value column to TRUE so they will be applied in the model\nCreate or update the habitat capacities file. Define the K capacity values for each location and life stage.\nReccomended: Run the model in the Shiny app to ensure it is functioning as intended.\n\n\n\n\n7.5.2 Compensation Ratios for Density-Dependent Growth\nIt is possible to implement density-dependent constraints with both the compensation ratios and the location and stage-specific carrying capacities, but we recommend using only one mechanism for density-dependent growth to avoid confusion.\nCompensation ratios (CR values) can be used in the CEMPRA life cycle model to parameterize and control density-dependent growth. Compensation ratios (described below) are a reparameterization of the classical Beverton-Holt function for density-dependent growth.\nWe recommend that users who are unfamiliar with compensation ratios & advanced methods in population ecology avoid compensation ratios and stick to stage-specific carrying capacities.\nCompensation Ratios (CR) adjust the survivorship of each life stage based on the observed densities (abundance, N i,t) and stage-specific carrying capacities (Ki):\n\n7.5.2.1 Compensation Ratio CR for life stage i:\nThe compensation ratio for life stage i adjusts the survivorship of each life stage based on the observed densities (abundance, Ni,t) and stage-specific carrying capacities (Ki):\n\n\n\nCompensation Ratio CR for life stage i\n\n\nIn the CR equation above, Si,0 is the baseline survivorship (surv_X) under density-independent growth conditions; wi is the compensation ratio (CR value) of life stage i; Ni,t is the current number of individuals in life stage i in a given time step (t); and Ki is the carrying capacity of life stage i. The compensation ratios, in essence, modify the survivorship of each life stage based on how far the stage-specific abundance (Ni,t) has departed from its assumed carrying capacity (Ki).\nA plot of compensation ratios is provided below to illustrate their effects on stage-specific survivorship transitions. In this example, abundance values of a hypothetical stage class (i) are plotted along the x-axis with a carrying capacity (Ki) set to 100 individuals (blue vertical line). The hypothetical stage class (i) has a baseline survivorship (productivity) value of 0.8 in the absence of density-dependent growth conditions (horizontal red line). The y-axis on the plot shows how the default survivorship value of 0.8 is modified based on the stage-specific compensation ratio for stage class (CRi). The survivorship value for the stage class is suppressed as the abundance values exceed the carrying capacity K. The effects are amplified as compensation ratios are increased. Compensation ratios of 1.0 leave the vital rate unmodified. Compensation ratios less than 1.0 increase survivorship values (allowing for a potential positive effect of density). When the abundance of the age class is less than the carrying capacity, baseline survivorship values can actually increase. However, within the model code, adjusted survivorship values are fixed so that they never exceed 1.0 for any stage transition.\n\n\n\nInfluence of compensation ratios on stage-specific survivorship\n\n\n\nInfluence of compensation ratios on stage-specific survivorship.\n\n\n\n7.5.2.2 Compensation Ratios & Stage-Specific Carrying Capacity Estimates:\nWhen using compensation ratios, it is only possible to modify the carrying capacity for the adult age class via the K parameter in the life cycle profile. The K values for other age classes are derived from the stable-stage distribution of the underlying transition matrix. This means that users who implement density-dependent growth via compensation ratios can only modify stage-specific abundance relative to the stable stage distribution. If you know (or can estimate) critical location-specific and stage-specific capacities (e.g., maximum stage_1 parr at location X), then refer to Section 8.4.1 to implement density-dependent growth constraints with location and stage-specific carrying capacities.\nStage-specific capacities (K) with compensation ratios:\n\nK (Stage-0, eggs): Calculated as the product of the number of individuals in all mature age classes, multiplied by maturation probabilities for each class, the number of spawning events, eggs per female, sex ratio and spawning interval.\nK (Stage-0, fry): K values for young-of-the-year (fry/Age-0) individuals are calculated as the product of K (Stage-0, eggs) * the egg survival (SE).\nK (Stage-1): Calculated from the stable-stage distribution of the transition matrix (B) after setting the adult stage (Stage-4) to K (e.g., 100).\nK (Stage-2): Calculated from the stable-stage distribution of the transition matrix (B) after setting the adult stage (Stage-4) to K (e.g., 100).\nK (Stage-3): Calculated from the stable-stage distribution of the transition matrix (B) after setting the adult stage (Stage-4) to K (e.g., 100).\nK (Stage-4): Manually input by the user for the population of interest. This assumes that stage-4 is the only mature age class.\n\nStable-stage distribution (portions) under the example species profile ?fig-figure27:\n\n\n7.5.2.3 Stable Stage Distributions (as a fraction 0 - 1) & Stage-specific Carrying Capacities (K):\n\n\n\nStable Stage Distributions and Stage-specific Carrying Capacities\n\n\n\n\n7.5.2.4 Compensation Ratios and the Density-Dependence Matrix (D):\nBased on the derived stage-specific carrying capacities (K values), baseline survivorship values (SE, S0, surv_1, …) and the corresponding compensation ratios (cr_E, cr_0, cr_1, …), a density-dependence matrix (D) for a hypothetical population vector of eggs: 10,000,000, fry: 1,000,000; stage 1: 100,000, stage 2: 10,000, stage 3: 1,000 & stage 4: 100 will appear as follows:\nThe density-dependence matrix (D) contains vital rate modifiers for the estimated survivorship values at each stage transition. The density-dependence matrix (D) is multiplied with the corresponding transition matrix (B, Table 2) of density-independent transition probabilities. The finalized projection matrix (A) is the product of the density-dependent matrix (D), and the transition matrix (B) [A is a product of B*D = A]. The density-dependent matrix changes with each time step based on the number of individuals. The projection matrix (A) is, therefore, recalculated for each time step.\nCompensation ratios are widely used as parameters in stock-recruitment functions, although they are admittedly less popular in classical matrix life cycle modeling. Steepness (the proportion of recruitment produced when stock size is reduced to 20% of initial biomass) is sometimes used in place of compensation ratios. Numerous other methods exist to introduce density dependence into stage-structured life cycle models. The compensation ratios are available as a default option for the CEMPRA tool to represent a versatile mechanism for applications to a large number of hypothetical species profiles. If location and stage-specific carrying capacities can be estimated, we recommend users set all compensation ratios to 1.0 for each stage class (therefore omitting compensation ratios) and refer to Section 8.4.1 for classical density-dependent growth with Beverton-Holt functions. For additional background, please review the following references to learn more about compensation ratios and life cycle modeling with density-dependent growth.\nCompensation Ratios in the Species Profile\n\n\n\n\n\n\n\nParameter\nDescription\n\n\n\n\n\n\n\n\ncr_E, cr_0, cr_1, cr_2, cr_3, cr_4\nThe compensation ratios for egg (cr_E), Age-0 fry (cr_0) and subsequent stage classes (cr_1 to cr_4) can be set. If the Nstage value is different than four, then add or remove rows accordingly. Compensation ratios can be set to 1.0 to omit the use of compensation ratios to govern density-dependent growth.\n\n\n\n\n\n7.5.2.5 Useful references to understand Compensation Ratios:\nTo further understand compensation ratios and their application in life cycle modeling, the following references are recommended:\n\nGoodyear, C. P. (1980). Compensation in fish populations. Biological monitoring of fish, 253-280.\nMyers, R. A. (2001). Stock and recruitment: generalizations about maximum reproductive rate, density dependence, and variability using meta-analytic approaches. ICES Journal of Marine Science, 58(5), 937-951.\nRose, K. A., Cowan Jr, J. H., Winemiller, K. O., Myers, R. A., & Hilborn, R. (2001). Compensatory density dependence in fish populations: importance, controversy, understanding and prognosis. Fish and Fisheries, 2(4), 293-327.\nMyers, R. A., Bowen, K. G., & Barrowman, N. J. (1999). Maximum reproductive rate of fish at low population sizes. Canadian Journal of Fisheries and Aquatic Sciences, 56(12), 2404-2419.\nWalters, C. J., & Martell, S. J. (2004). Fisheries ecology and management. Princeton University Press.\nForrest, R. E., McAllister, M. K., Dorn, M. W., Martell, S. J., & Stanley, R. D. (2010). Hierarchical Bayesian estimation of recruitment parameters and reference points for Pacific rockfishes (Sebastes spp.) under alternative assumptions about the stock–recruit function. Canadian Journal of Fisheries and Aquatic Sciences, 67(10), 1611-1634.",
    "crumbs": [
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Life Cycle Model (Population Model)</span>"
    ]
  },
  {
    "objectID": "07_life_cycle_model.html#stochastic-simulations",
    "href": "07_life_cycle_model.html#stochastic-simulations",
    "title": "7  Life Cycle Model (Population Model)",
    "section": "7.6 Stochastic Simulations",
    "text": "7.6 Stochastic Simulations\nSeveral additional parameters are available to influence the stochasticity (variability) of the population projections. Implementing these parameters is useful for understanding the viability of the population and (over many simulations) estimating the number of batch replicates that fall below a given critical threshold (e.g., X adults).\n\n7.6.1 eps_sd: Standard Deviation in Eggs-per-Spawner\n\n\n\n\n\n\n\nParameter\nDescription\n\n\n\n\neps_sd\nThe Standard Deviation in Eggs-per-Spawner controls the variability in fecundity across simulation years and batch replicates. The example below shows a sample projection with eps_sd set to 250 and 750. In the example with eps_sd set to 750, there are several years with very high fecundity. Density-dependent constraints (if implemented) may attenuate the apparent effect of high eps_sd inputs.\n\n\n\n\n\n\neps_sd Standard Deviation in Eggs-per-Spawner\n\n\n\neps_sd Standard Deviation in Eggs-per-Spawner\n\n\n\n7.6.2 egg_rho: Correlation in Egg Fecundity Through Time\n\n\n\n\n\n\n\nParameter\nDescription\n\n\n\n\negg_rho\nIn natural populations, there will be good years and bad years. It’s assumed that good years will be good for large adults and small adults. If multiple mature stage classes contribute to spawning (fecundity) (i.e., maturity values are greater than 0), it is assumed that fecundity will be correlated between good and bad years across stage classes (i.e., stage_5, stage_6 & stage_7). egg_rho controls the degree of correlation in interannual fecundity between stage classes. See the following figure for an illustrative example. If egg_rho is low, and multiple stage classes contribute to spawning, then some stage classes may compensate for good/bad years. Conversely, if egg_rho is high, then the population may be highly volatile as all cohorts experience good/bad years simultaneously.\n\n\n\n\n\n\negg_rho: correlation in egg fecundity through time\n\n\n\negg_rho: correlation in egg fecundity through time\n\n\n\n7.6.3 M.cv: Coefficient of Variation (CV) in Interannual Stage-Specific Mortality\n\n\n\n\n\n\n\nParameter\nDescription\n\n\n\n\nM.cv\nThe Coefficient of Variation (CV) in stage-specific mortality (M.cv) is based on a beta distribution. This parameter allows for the modeling of variability in mortality rates across different life stages, contributing to a more dynamic and realistic simulation of population dynamics.\n\n\n\n\n\n7.6.4 M.rho: Correlation in Stage-Class Mortality Through Time\n\n\n\n\n\n\n\nParameter\nDescription\n\n\n\n\nM.rho\nM.rho, the correlation in mortality through time, plays a critical role in modeling the variability of survivorship across life stages. In natural populations, the occurrence of good and bad years is often correlated across all stage classes, excluding eggs (SE). M.rho determines the degree of this correlation. A low M.rho value suggests that certain stage classes may compensate for good/bad years based on random sampling of survivorship, while a high M.rho implies that all cohorts may experience good/bad years simultaneously, leading to higher volatility in population dynamics.\n\n\n\n\n\n\nM.rho: correlation in survivorship through time\n\n\n\nM.rho: correlation in survivorship through time\n\n\n\n7.6.5 p.cat: Probability of Catastrophe per Generation\n\n\n\n\n\n\n\nParameter\nDescription\n\n\n\n\np.cat\np.cat represents the Probability of Catastrophe per Generation. This parameter is scaled to the average generation time of the population, reflecting the annual probability of a catastrophic event occurring. It’s a critical factor in assessing the resilience and long-term sustainability of a population under varying environmental and anthropogenic pressures.\n\n\n\n\n\n\nProbability of Catastrophe per Generation\n\n\n\np.cat: Probability of Catastrophe per Generation",
    "crumbs": [
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Life Cycle Model (Population Model)</span>"
    ]
  },
  {
    "objectID": "07_life_cycle_model.html#building-a-life-cycle-profile",
    "href": "07_life_cycle_model.html#building-a-life-cycle-profile",
    "title": "7  Life Cycle Model (Population Model)",
    "section": "7.7 Building a Life Cycle Profile",
    "text": "7.7 Building a Life Cycle Profile\nA customized life cycle profile can be developed using the following template: Life Cycle Profile Template.\nAppendix B includes sample species profiles for case study systems, such as Nicola Basin Chinook Salmon, Steelhead, and Coho Salmon. The COMPADRE (plant) and COMADRE (animal) online archives also offer vital rates for numerous species as of March 2023 (COMADRE Database). These archives can be valuable resources for reviewing vital rate estimates for similar species and taxa.\nIt’s recommended to first summarize the species’ life cycle using a simple diagram to represent key life stages. This diagram can be converted into a periodicity table (or life history schedule) to represent time spent in each life stage, as shown in the figure. A life history diagram coupled with a periodicity table can be helpful in mapping out transitions between key stages in the life cycle model. Recall that the life cycle model works with annual time steps. “Census” periods within the matrix model do not need to fall precisely at the one-year interval, but care should be taken to ensure that key transitions are not missed or double-counted. It is best to start from the spawning period and work forward, following a whole generation to its progeny\n\n\n\nSample life cycle diagram and periodicity table for Coho Salmon\n\n\n\nSample combo life cycle diagram and periodicity table for a coastal population of Coho Salmon in British Columbia\n\nUsers can load a draft species profile into the R-Shiny application and modify it as needed. It is important to review the eigenanalysis of the projection matrix to ensure that lambda estimates, generation time, and stable-stage distributions align with expectations based on the species’ life history.\nParameters to double-check:\n\nLambda (λ, instantaneous growth rates) estimates are reasonable (not substantially different from 1.0). If lambda estimates are lower than 1.0, review parameters.\nGeneration time approximately matches the characterization of the species’ life history in the literature.\nStable-stage distributions from the projection matrix are not substantially different from expectations.",
    "crumbs": [
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Life Cycle Model (Population Model)</span>"
    ]
  },
  {
    "objectID": "07_life_cycle_model.html#benefits-and-limitations",
    "href": "07_life_cycle_model.html#benefits-and-limitations",
    "title": "7  Life Cycle Model (Population Model)",
    "section": "7.8 Benefits and Limitations",
    "text": "7.8 Benefits and Limitations\nThe life cycle modeling component of the CEMPRA tool is a valuable resource for understanding and quantifying cumulative effects, linking critical stressors to key life stages, and supporting an understanding of the relevance of key drivers curtailing productivity and capacity. Related analyses have provided a useful framework to synthesize pathways for cumulative effects through the lens of population ecology ((Beechie et al., 2021); (Jorgensen et al., 2021); (Sorel, 2022); (Kendall et al., 2023)). Simulations allow user groups to play out hypothetical scenarios with multiple stressors, locations, and species profiles, making it possible to perform many complex calculations within a simple user interface.\nHowever, there are key limitations to the CEMPRA tool and life cycle modeling in general. Depending on the parameterization of a species profile, there can be key stages and vital rates that are highly sensitive to perturbation. It can be challenging to discern whether these sensitivities reflect actual vulnerabilities in nature or are artifacts of the modeling framework. Therefore, some researchers emphasize the need to treat life cycle models as hypothesis generators until predictions and causal pathways can be empirically validated ((Roni et al., 2018)).\nThe CEMPRA tool does not account for complex variations in life history strategies, seasonal movement, individual exposure, and detailed habitat criteria. Therefore, it’s up to the users to carefully design stressor variables, stressor magnitude datasets, and stressor-response relationships such that linkages are already largely accounted for in the underlying input data. When summarizing results, it is advisable for user groups to focus on reviewing relative differences between scenarios compared to a default (status-quo) reference scenario. Interpreting results as relative differences is more relatable than trying to rationalize absolute values (e.g., “scenario A increased system capacity by ~10% relative to scenario B” vs “scenario A increased capacity by 321 fish relative to scenario B”).\nUser groups and practitioners should use life cycle models to help develop high-level goals for restoration and recovery programs ((Roni et al., 2018)). While useful for identifying key demographic bottlenecks and the sensitivity of those bottlenecks to the range of stressor values observed on the landscape (or projected through simulation), life cycle models are less useful for designing small-scale projects. Efforts should continue to validate and refine predictions with field data and empirical studies.\n\n\n\n\n\nBeechie, T. J., Nicol, C., Fogel, C., Jorgensen, J., Thompson, J., Seixas, G., Chamberlin, J., Hall, J., Timpane-Padgham, B., Kiffney, P., Kubo, S., & Keaton, J. (2021). Modeling effects of habitat change and restoration alternatives on salmon in the chehalis river basin using a salmonid life-cycle model (NMFS-NWFSC-CR-2021-01). U.S. Department of Commerce, NOAA.\n\n\nCaswell, H. (1997). Matrix methods for population analysis. In S. Tuljapurkar & H. Caswell (Eds.), Structured-population models in marine, terrestrial, and freshwater systems (pp. 19–58). Springer US. https://doi.org/10.1007/978-1-4615-6005-0_2\n\n\nChen, E. K. (2024). Life history and population dynamics of chinook salmon in the central valley [Ph.D. dissertation]. University of California, Berkeley.\n\n\nCox-Rogers, S., Hume, J. M. B., Shortreed, K. S., & Spilsted, B. (2010). A risk assessment model for skeena river sockeye salmon (2920; Canadian Manuscript Report of Fisheries and Aquatic Sciences). Fisheries; Oceans Canada.\n\n\nCramer, S. P., & Ackerman, N. K. (2009). Linking stream carrying capacity for salmonids to habitat features. American Fisheries Society Symposium, 71, 225–254.\n\n\nDavison, R. J., & Satterthwaite, W. H. (2016). Use of age and stage structured matrix models to predict life history schedules for semelparous populations. Natural Resource Modeling, 29(4), 538–558. https://doi.org/10.1111/nrm.12109\n\n\nJorgensen, J. C., Nicol, C., Fogel, C., & Beechie, T. J. (2021). Identifying the potential of anadromous salmonid habitat restoration with life cycle models. Plos One, 16(9), e0256792.\n\n\nKendall, N. W., Unrein, J., Volk, C., Beauchamp, D. A., Fresh, K. L., & Quinn, T. P. (2023). Life cycle model reveals sensitive life stages and evaluates recovery options for a dwindling pacific salmon population. North American Journal of Fisheries Management, 43(1), 203–230.\n\n\nRoni, P., Anders, P. J., Beechie, T. J., & Kaplowe, D. J. (2018). Review of tools for identifying, planning, and implementing habitat restoration for pacific salmon and steelhead. North American Journal of Fisheries Management, 38(2), 355–376.\n\n\nSchaub, M., & Kéry, M. (2021). Integrated population models: Theory and ecological applications with r and JAGS. Academic Press.\n\n\nSorel, M. (2022). Informing salmon conservation with life cycle models that account for individual heterogeneity [PhD thesis]. University of Washington.\n\n\nVan der Lee, A. S., & Koops, M. A. (2020). Recovery potential modelling of westslope cutthroat trout (oncorhynchus clarkii lewisi) in designatable unit 1: Saskatchewan-nelson river populations (Research Document 2020/020). Canadian Science Advisory Secretariat. https://www.dfo-mpo.gc.ca/csas-sccs/publications/resdocs-docrech/2020/2020_020-eng.html\n\n\nWard, B. R., & Slaney, P. A. (1993). Egg-to-smolt survival and fry-to-smolt density dependence of keough river steelhead trout. Canadian Special Publication of Fisheries and Aquatic Sciences, 209–217.",
    "crumbs": [
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Life Cycle Model (Population Model)</span>"
    ]
  },
  {
    "objectID": "08_stressor_response_library.html",
    "href": "08_stressor_response_library.html",
    "title": "8  Stressor-Response Library",
    "section": "",
    "text": "8.1 About\nThe stressor-response library is designed as a public reference archive to house generalizable stressor-response functions for use in the Cumulative Effects Model for Prioritizing Recovery Actions (CEMPRA) tool. The functions archived in the stressor-response library are widely applicable to numerous applications and use cases.\nUsers of the CEMPRA tool can select a subset of stressor-response functions applicable to their study area and focal species of interest. Selected stressor-response functions can be used to construct a customized stressor-response input workbook for the CEMPRA tool. The stressor-response library is a valuable resource for reference as it can expedite assessments with shared knowledge of common impact pathways. Although a suite of default stressor-response functions is available, the stressor-response library will continually be updated with novel stressor-response functions uploaded, edited, and validated by the community of users.\nAccess the Library: Draft Stressor-Response Library\nLeave questions and comments below (via your GitHub account)",
    "crumbs": [
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Stressor-Response Library</span>"
    ]
  },
  {
    "objectID": "08_stressor_response_library.html#08_stressor_response_library-sec-about",
    "href": "08_stressor_response_library.html#08_stressor_response_library-sec-about",
    "title": "8  Stressor-Response Library",
    "section": "",
    "text": "See Sierra Sullivan and Jordan Rosenfeld for Content.\nSee Matthew Bayly for login credentials to edit and upload data (info@mjbayly.com).",
    "crumbs": [
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Stressor-Response Library</span>"
    ]
  },
  {
    "objectID": "08_stressor_response_library.html#stressor-response-database",
    "href": "08_stressor_response_library.html#stressor-response-database",
    "title": "8  Stressor-Response Library",
    "section": "8.2 Stressor-Response Database",
    "text": "8.2 Stressor-Response Database\nCustom filters by species, stressor, endpoint etc.\nFilter library of stressor-response relationships with dynamic filters. Review stressor-response relationships and apply filters to refine search. It’s most useful to enter a term of interest in the “Search all text” input field such as “fines”, “sediment”, or “temperature”, and the click the blue “Apply” button to filter results. Scroll down the list below to review stressor-response relationships with their associated attributes (source, study area, species, life stage, reference etc.).\n\n\n\nStressor-Response Database List View\n\n\nOne you find a stressor-response relationship of interest, click on the stressor-response relationship from the list view to switch to detail view. The detail view of each stressor-response relationship includes descriptive details, citations, data, and all other attributes. Interactive plots are included at the bottom of the page. Some relationships are feature rich and contain descriptive background, source citations, file attachments, and other material. Other relationships are more simplified. Click the back button to return to the list view.\n\n\n\nStressor-response database detail view",
    "crumbs": [
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Stressor-Response Library</span>"
    ]
  },
  {
    "objectID": "08_stressor_response_library.html#create-multi-stressor-response-overview-plots",
    "href": "08_stressor_response_library.html#create-multi-stressor-response-overview-plots",
    "title": "8  Stressor-Response Library",
    "section": "8.3 Create Multi-Stressor-Response Overview Plots",
    "text": "8.3 Create Multi-Stressor-Response Overview Plots\nThe library allows for the creation of simple multi-stressor overlay plots. These can be especially useful to compare and contrast similar stressor-response relationships across study systems or species. For example, we may wish to compare the relationship between substrate embeddedness and fry capacity across several trout and salmonids.\nIn the example below we will use the multi-stressor overlay plots to compare several different relationships between stream temperature and vital rates of Chinook Salmon. Be sure ensure that the stressor metric is the same (or comparable) between each resource. For example, mean August stream temperature vs MWAT etc. Select several SR relationships of interest with the checkbox select inputs and then click the “Overlay Plot” button to create plots:\n\n\n\nMultiple stressor-response overview comparison plots",
    "crumbs": [
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Stressor-Response Library</span>"
    ]
  },
  {
    "objectID": "08_stressor_response_library.html#download-stressor-response-relationships",
    "href": "08_stressor_response_library.html#download-stressor-response-relationships",
    "title": "8  Stressor-Response Library",
    "section": "8.4 Download Stressor-Response Relationships",
    "text": "8.4 Download Stressor-Response Relationships\nFor most users the goal will be simply exporting the stressor-response relationships out of the library for use in external software and modelling excercises.\nSelect one or more stressor-response relationships of interest and click download. Several download formats are available including a format for the CEMPRA tool (Excel), JSON, etc. The JSON file format exports the entire database archive for selected stressors.\n\n\n\nDownload/Export stressor-response relationships of interest.",
    "crumbs": [
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Stressor-Response Library</span>"
    ]
  },
  {
    "objectID": "08_stressor_response_library.html#add-edit-and-update-the-database",
    "href": "08_stressor_response_library.html#add-edit-and-update-the-database",
    "title": "8  Stressor-Response Library",
    "section": "8.5 Add, Edit, and Update the Database",
    "text": "8.5 Add, Edit, and Update the Database\nAuthenticated users can login, add, edit and update relationships. Once logged in, options appear in the detail view to edit data for relationships. New stressors can be added in the detail view.\n\n\n\nggg\n\n\n\n\n\nLogin as an authenticated user to add, edit and update relationships.",
    "crumbs": [
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Stressor-Response Library</span>"
    ]
  },
  {
    "objectID": "08_stressor_response_library.html#stressor-response-curve-tracing-tool",
    "href": "08_stressor_response_library.html#stressor-response-curve-tracing-tool",
    "title": "8  Stressor-Response Library",
    "section": "8.6 Stressor-Response Curve Tracing Tool",
    "text": "8.6 Stressor-Response Curve Tracing Tool\nSometimes we need to extract data in figures from older reports. This can be a tedious task, even when using software like ImageJ. A specialized online tool has been developed to upload an image (from file or clipboard), trace the mean response, sd, lower, and upper limits and extract the data in a csv file pre-formatted for the SR database and CEMPRA tool.\nAccess the SR curve tracing tool\n(Ass the link to the video tutorial for a quick demo that describes how to use the tool).\n\n\n\nStressor-response curve tracing tool. Exract data from older figures.",
    "crumbs": [
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Stressor-Response Library</span>"
    ]
  },
  {
    "objectID": "09_case_study_applications.html",
    "href": "09_case_study_applications.html",
    "title": "9  Example Datasets",
    "section": "",
    "text": "9.1 Athabasca Rainbow Trout\n(MacPherson et al., 2020) leveraged the Joe Modelling framework to support recovery action planning and threat analysis of Athabasca Rainbow Trout. The Joe Model was a valuable resource for synthesizing stressors due to its ease of and utility as a design and communication tool. Stressors were developed in a near real-time workshop-like setting to game out alternative management scenarios. The flexibility of the stressor-response input data allows for the inclusion of synthetic proxies and hypothetical impact pathways, weaving together academic knowledge, anecdotal descriptions and expert opinion. The Joe Model was ultimately used as a prioritization tool to help design actions, programs, and priorities across a large geographic and complex region.\nDefault sample dataset when tool loads:\nThe default study area, stressor list and species profile in the Shiny application are from the (MacPherson et al., 2020) Athabasca Rainbow Trout project.\nLeave questions and comments below (via your GitHub account)",
    "crumbs": [
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Example Datasets</span>"
    ]
  },
  {
    "objectID": "09_case_study_applications.html#09_case_study_applications-09_case_study_applications-athabasca-rainbow-trout",
    "href": "09_case_study_applications.html#09_case_study_applications-09_case_study_applications-athabasca-rainbow-trout",
    "title": "9  Example Datasets",
    "section": "",
    "text": "Stressor Response Workbook\nStressor Magnitude Workbook\nWatershed Locations .gpkg\nLife Cycle Profile (optional)",
    "crumbs": [
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Example Datasets</span>"
    ]
  },
  {
    "objectID": "09_case_study_applications.html#simple-working-example-hypothetical",
    "href": "09_case_study_applications.html#simple-working-example-hypothetical",
    "title": "9  Example Datasets",
    "section": "9.2 Simple Working Example (hypothetical)",
    "text": "9.2 Simple Working Example (hypothetical)\nThis straightforward example serves as an easy-to-use template for your own input files, offering minimal complexity and adaptability for customization.\n\nStressor Response Workbook\nStressor Magnitude Workbook\nWatershed Locations .gpkg",
    "crumbs": [
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Example Datasets</span>"
    ]
  },
  {
    "objectID": "09_case_study_applications.html#wsep-watershed-status-evaluation-protocol-fisheries-sensitive-watersheds-fsws",
    "href": "09_case_study_applications.html#wsep-watershed-status-evaluation-protocol-fisheries-sensitive-watersheds-fsws",
    "title": "9  Example Datasets",
    "section": "9.3 WSEP (Watershed Status Evaluation Protocol) Fisheries Sensitive Watersheds (FSWs)",
    "text": "9.3 WSEP (Watershed Status Evaluation Protocol) Fisheries Sensitive Watersheds (FSWs)\nThis example is provided for illustrative purposes only. The CEMPRA toolbox is used to review risk and hazard scores for several fisheries sensitive watersheds (FSW) in BC. Note that the data used in this example is for illustrative purposes only and is outdated for risk/hazard assessments. For more details see the original report FREP Report #39\n\nStressor Response Workbook\nStressor Magnitude Workbook\nWatershed Locations .gpkg",
    "crumbs": [
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Example Datasets</span>"
    ]
  },
  {
    "objectID": "09_case_study_applications.html#meso-habitat-units-hypothetical",
    "href": "09_case_study_applications.html#meso-habitat-units-hypothetical",
    "title": "9  Example Datasets",
    "section": "9.4 Meso-Habitat Units (hypothetical)",
    "text": "9.4 Meso-Habitat Units (hypothetical)\nThis example is solely for illustration and should not be used as a reference for any purposes. It demonstrates the use of meso-habitat units from the Sensitive Habitat Inventory and Mapping (SHIM) initiative conducted by Ecoscape Environmental Consultants Ltd in the Coldwater River. Here, Aquatic Habitat Index (AHI) serves as a stand-in for Mean System Capacity. This case is included to show the application of the CEMPRA toolbox across various spatial scales. The data presented here is entirely synthetic and only meant for demonstration. For comprehensive details and accurate data, please refer to the original report and resources. Nicola SHIM AHI.\n\nStressor Response Workbook\nStressor Magnitude Workbook\nWatershed Locations .gpkg",
    "crumbs": [
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Example Datasets</span>"
    ]
  },
  {
    "objectID": "09_case_study_applications.html#matrix-interaction-example-1-template",
    "href": "09_case_study_applications.html#matrix-interaction-example-1-template",
    "title": "9  Example Datasets",
    "section": "9.5 Matrix Interaction (Example 1: Template)",
    "text": "9.5 Matrix Interaction (Example 1: Template)\nThis example is designed to demonstrate the two-factor matrix interaction surface. Given that the matrix interaction surface necessitates a specialized stressor response Excel workbook, this example can be utilized as a practical template for customization. See the Matrix Interaction Documentation for more details.\n\nStressor Response Workbook\nStressor Magnitude Workbook\nWatershed Locations .shp (ZIP folder)",
    "crumbs": [
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Example Datasets</span>"
    ]
  },
  {
    "objectID": "09_case_study_applications.html#matrix-interaction-example-2-application",
    "href": "09_case_study_applications.html#matrix-interaction-example-2-application",
    "title": "9  Example Datasets",
    "section": "9.6 Matrix Interaction (Example 2: Application)",
    "text": "9.6 Matrix Interaction (Example 2: Application)\nThe purpose of this second example is to demonstrate the matrix interaction surface through a practical case study. To simplify, we apply the British Columbia Freshwater Atlas (BCFWA) Assessment Watersheds. Here, we estimate hydrological runoff potential by multiplying two factors: a) the Biogeoclimatic Ecosystem Classification (BEC) Unit Score, and b) the percentage of Alpine non-Forested Area. It’s important to note that hydrological runoff potential is not a standard stressor in the Joe Model; it is used here solely for illustration. See the original report here: BC-CEF Interim Interim Assessment Protocol for Aquatic Ecosystems in British Columbia for more details).\n\nStressor Response Workbook\nStressor Magnitude Workbook\nWatershed Locations .shp (ZIP folder)",
    "crumbs": [
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Example Datasets</span>"
    ]
  },
  {
    "objectID": "09_case_study_applications.html#09_case_study_applications-09_case_study_applications-nicola-basin-salmonids",
    "href": "09_case_study_applications.html#09_case_study_applications-09_case_study_applications-nicola-basin-salmonids",
    "title": "9  Example Datasets",
    "section": "9.7 ",
    "text": "9.7 \n\n\n\n\nMacPherson, L., Sullivan, M., Reilly, J., & Paul, A. (2020). Alberta’s fisheries sustainability assessment: A guide to assessing population status, and quantifying cumulative effects using the joe modelling technique. Canadian Science Advisory Secretariat (CSAS).",
    "crumbs": [
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Example Datasets</span>"
    ]
  },
  {
    "objectID": "10_r_package_tutorials.html",
    "href": "10_r_package_tutorials.html",
    "title": "10  R Package Tutorials",
    "section": "",
    "text": "The CEMPRA R Package (available on GitHub: https://github.com/essatech/CEMPRA/) can be used for custom model applications and batch processing. The R Package allows users to run the model offline and customize the code, inputs, and outputs. Users can also conduct batch runs of the life cycle model, which allows for faster, automated processing over a large number of spatial units and/or scenarios. For more information about the use and installation of the CEMPRA R Package, see the following tutorials:\n\nTutorial 1: Joe Model Overview: https://essatech.github.io/CEMPRA/articles/a01-joe-model.html\nTutorial 2: Joe Model Batch Run: https://essatech.github.io/CEMPRA/articles/a02-joe-model-batch-run.html\nTutorial 3: Population Model Overview: https://essatech.github.io/CEMPRA/articles/a03-population-model.html\nTutorial 4: Population Model Batch Run: https://essatech.github.io/CEMPRA/articles/a04-population-model-batch-run.html\nTutorial 5: BC CEF Data Import: https://essatech.github.io/CEMPRA/articles/a05-bc-cef.html\n\n\n\n\nLeave questions and comments below (via your GitHub account)",
    "crumbs": [
      "<span class='chapter-number'>10</span>  <span class='chapter-title'>R Package Tutorials</span>"
    ]
  },
  {
    "objectID": "11_conclusions.html",
    "href": "11_conclusions.html",
    "title": "11  Concluding Remarks",
    "section": "",
    "text": "11.1 Benefits and Limitations\nThe CEMPRA tool has the flexibility to perform cumulative effects assessments for both data-rich and data-poor species, allowing for the analysis of a range of study systems, including species-at-risk. Various assessment endpoints are available for different use cases. With only four generic input datasets, onboarding new users is intended to be relatively simple.\nThe Joe Modelling component of the CEMPRA tool is a generic assessment framework widely applicable to data-rich and data-limited species. The Joe Model acts as a simplified stressor roll-up framework for watershed assessments. Stressors can be added and manipulated in near real-time in a workshop-like setting. Proven use cases on numerous study systems show how it can be a critical asset to facilitate a shared understanding of watershed stewardship and high-level strategy development for watershed planning.\nThe life cycle modelling component of the CEMPRA tool offers the ability to link stressors to key vital rates in a demographic modelling framework. User groups and practitioners can solicit the life cycle models to help develop high-level goals for restoration and recovery programs ((Roni et al., 2018)). Life cycle models are useful to identify key demographic bottlenecks and the sensitivity of those bottlenecks to the range of stressor values observed on the landscape (or projected through scenario simulation).\nThe CEMPRA framework should be considered a simple approach to cumulative effects assessments. It provides the greatest utility for large-scale planning activities at the intersection between different user groups and stakeholders. The intent of the CEMPRA tool is to provide a working framework for both data-rich and data-limited species with alternative assessment endpoints. Stressor-response relationships are the underlying theme of the CEMPRA tool. Our hope is that the CEMPRA will support the development of a collaborative user community, reducing duplicated efforts in the development of stressor variables, species profiles and assessment frameworks.\nLeave questions and comments below (via your GitHub account)",
    "crumbs": [
      "<span class='chapter-number'>11</span>  <span class='chapter-title'>Concluding Remarks</span>"
    ]
  },
  {
    "objectID": "11_conclusions.html#11_conclusions-benefits-and-limitations",
    "href": "11_conclusions.html#11_conclusions-benefits-and-limitations",
    "title": "11  Concluding Remarks",
    "section": "",
    "text": "Roni, P., Anders, P. J., Beechie, T. J., & Kaplowe, D. J. (2018). Review of tools for identifying, planning, and implementing habitat restoration for pacific salmon and steelhead. North American Journal of Fisheries Management, 38(2), 355–376.",
    "crumbs": [
      "<span class='chapter-number'>11</span>  <span class='chapter-title'>Concluding Remarks</span>"
    ]
  },
  {
    "objectID": "references.html",
    "href": "references.html",
    "title": "References",
    "section": "",
    "text": "Alexander, S. M., Provencher, J. F., Henri, D. A., Taylor, J. J.,\nLloren, J. I., Nanayakkara, L., et al. (2019). Bridging indigenous and\nscience-based knowledge in coastal and marine research, monitoring, and\nmanagement in canada. Environmental Evidence, 8(1),\n1–24.\n\n\nBeechie, T. J., Nicol, C., Fogel, C., Jorgensen, J., Thompson, J.,\nSeixas, G., Chamberlin, J., Hall, J., Timpane-Padgham, B., Kiffney, P.,\nKubo, S., & Keaton, J. (2021). Modeling effects of habitat\nchange and restoration alternatives on salmon in the chehalis river\nbasin using a salmonid life-cycle model (NMFS-NWFSC-CR-2021-01).\nU.S. Department of Commerce, NOAA.\n\n\nCaswell, H. (1997). Matrix methods for population analysis. In S.\nTuljapurkar & H. Caswell (Eds.), Structured-population models in\nmarine, terrestrial, and freshwater systems (pp. 19–58). Springer\nUS. https://doi.org/10.1007/978-1-4615-6005-0_2\n\n\nChen, E. K. (2024). Life history and population dynamics of chinook\nsalmon in the central valley [Ph.D. dissertation]. University of\nCalifornia, Berkeley.\n\n\nCox-Rogers, S., Hume, J. M. B., Shortreed, K. S., & Spilsted, B.\n(2010). A risk assessment model for skeena river sockeye salmon\n(2920; Canadian Manuscript Report of Fisheries and Aquatic Sciences).\nFisheries; Oceans Canada.\n\n\nCramer, S. P., & Ackerman, N. K. (2009). Linking stream carrying\ncapacity for salmonids to habitat features. American Fisheries\nSociety Symposium, 71, 225–254.\n\n\nDavison, R. J., & Satterthwaite, W. H. (2016). Use of age and stage\nstructured matrix models to predict life history schedules for\nsemelparous populations. Natural Resource Modeling,\n29(4), 538–558. https://doi.org/10.1111/nrm.12109\n\n\nHalpern, B. S., & Fujita, R. (2013). Assumptions, challenges, and\nfuture directions in cumulative impact analysis. Ecosphere,\n4, 1–11.\n\n\nHoude, N. (2007). The six faces of traditional ecological knowledge:\nChallenges and opportunities for canadian co-management arrangements.\nEcology and Society, 12(2).\n\n\nJarvis, L., Rosenfeld, J., Gonzalez-Espinosa, P., & Enders, E.\n(2023). A process framework for integrating stressor-response functions\ninto cumulative effects models. Science of the Total\nEnvironment, XXX, 167456.\n\n\nJensen, D. W., Steel, E. A., Fullerton, A. H., & Pess, G. R. (2009).\nImpact of fine sediment on incubation survival of pacific salmon: A\nmeta-analysis of published studies. Reviews in Fisheries\nScience, 17(3), 348–359. https://doi.org/10.1080/10641260902716954\n\n\nJorgensen, J. C., Nicol, C., Fogel, C., & Beechie, T. J. (2021).\nIdentifying the potential of anadromous salmonid habitat restoration\nwith life cycle models. Plos One, 16(9), e0256792.\n\n\nKendall, N. W., Unrein, J., Volk, C., Beauchamp, D. A., Fresh, K. L.,\n& Quinn, T. P. (2023). Life cycle model reveals sensitive life\nstages and evaluates recovery options for a dwindling pacific salmon\npopulation. North American Journal of Fisheries Management,\n43(1), 203–230.\n\n\nLarned, S. T., & Schallenberg, M. (2019). Stressor-response\nrelationships and the prospective management of aquatic ecosystems.\nNew Zealand Journal of Marine and Freshwater Research,\n53, 489–512.\n\n\nMacPherson, L. M., Reilly, J. R., Neufeld, K. R., Sullivan, M. G., Paul,\nA. J., & Johnston, F. D. (2023). Prioritizing bull trout recovery\nactions using a novel cumulative effects modelling framework.\nFisheries Management and Ecology, 1–17.\n\n\nMacPherson, L., Sullivan, M., Reilly, J., & Paul, A. (2020).\nAlberta’s fisheries sustainability assessment: A guide to assessing\npopulation status, and quantifying cumulative effects using the joe\nmodelling technique. Canadian Science Advisory Secretariat (CSAS).\n\n\nMurray, A. M., Sullivan, M. G., & Acorn, J. (2012). A tribute to\njoseph schieser nelson, 1937–2011. Canadian Field-Naturalist,\n125, 373–380.\n\n\nPearsall, et al. (2022). Nicola watershed RAMS final report 2022:\nNicola basin chinook risk assessment final report. A process developed\nwith the nicola collaborative research and technical committee.\n\n\nPiet, G. J., Tamis, J. E., Volwater, J., Vries, P. de, Wal, J. T. van\nder, & Jongbloed, R. H. (2021). A roadmap towards quantitative\ncumulative impact assessments: Every step of the way. Science of The\nTotal Environment, 784, 146847.\n\n\nPirotta, E., Thomas, L., Costa, D. P., Hall, A. J., Harris, C. M.,\nHarwood, J., et al. (2022). Understanding the combined effects of\nmultiple stressors: A new perspective on a longstanding challenge.\nScience of the Total Environment, 821, 153322.\n\n\nRoni, P., Anders, P. J., Beechie, T. J., & Kaplowe, D. J. (2018).\nReview of tools for identifying, planning, and implementing habitat\nrestoration for pacific salmon and steelhead. North American Journal\nof Fisheries Management, 38(2), 355–376.\n\n\nRosenfeld, J. S. (2017). Developing flow–ecology relationships:\nImplications of nonlinear biological responses for water management.\nFreshwater Biology, 62, 1305–1324.\n\n\nRosenfeld, J. S., Ayllón, D., Grant, J. W., Naman, S. M., Post, J. R.,\nMatte, J.-M., et al. (2024). Determinants of productive capacity for\nstream salmonids. In J. Lobon-Cervia, P. Budy, & R. Gresswell\n(Eds.), Advances in the ecology of stream-dwelling salmonids\n(pp. 1–12). Springer Life Sciences.\n\n\nRosenfeld, J., Gonzalez-Espinosa, P., Jarvis, L., Enders, E., Bayly, M.,\nPaul, A., MacPherson, L., Moore, J., Sullivan, M., Ulaski, M., et al.\n(2022). Stressor-response functions as a generalizable model for context\ndependence. Trends in Ecology & Evolution.\n\n\nSchäfer, R. B., & Piggott, J. J. (2018). Advancing understanding and\nprediction in multiple stressor research through a mechanistic basis for\nnull models. Global Change Biology, 24, 1817–1826.\n\n\nSchaub, M., & Kéry, M. (2021). Integrated population models:\nTheory and ecological applications with r and JAGS. Academic Press.\n\n\nSorel, M. (2022). Informing salmon conservation with life cycle\nmodels that account for individual heterogeneity [PhD thesis].\nUniversity of Washington.\n\n\nSullivan, M. (2017). Adaptive management of athabasca rainbow trout;\ncumulative effects modelling and potential management actions.\nAlberta Environment; Parks; Fisheries Management Branch.\n\n\nVan der Lee, A. S., & Koops, M. A. (2020). Recovery potential\nmodelling of westslope cutthroat trout (oncorhynchus clarkii lewisi) in\ndesignatable unit 1: Saskatchewan-nelson river populations\n(Research Document 2020/020). Canadian Science Advisory Secretariat. https://www.dfo-mpo.gc.ca/csas-sccs/publications/resdocs-docrech/2020/2020_020-eng.html\n\n\nWalters, C. (1997). Challenges in adaptive management of riparian and\ncoastal ecosystems. Conservation Ecology [Online],\n1(2), 1.\n\n\nWard, B. R., & Slaney, P. A. (1993). Egg-to-smolt survival and\nfry-to-smolt density dependence of keough river steelhead trout.\nCanadian Special Publication of Fisheries and Aquatic Sciences,\n209–217.\n\n\n\n\n\nLeave questions and comments below (via your GitHub account)",
    "crumbs": [
      "References"
    ]
  },
  {
    "objectID": "appendix_interaction_matrix.html",
    "href": "appendix_interaction_matrix.html",
    "title": "Appendix A — Multi-Stressor Interaction Matrix",
    "section": "",
    "text": "A.1 Customizable Two-Factor Interaction Matrix\nCustomizable 2-factor interaction matrices may be (optionally) included by users to specify non-additive interactions between stressor variables (e.g., antagonistic, synergistic, etc.). If included, these matrices define the mean system capacity at different combination levels between two stressors. This can be especially important to capture conditional effects, attenuating or exacerbating factors, and/or compound variance and uncertainties. The 2-factor interaction matrices can also be a convenient mechanism to explore hypothetical and experimental scenarios.\nThe 2-factor interaction matrices are defined in the Stressor-Response Excel workbook. Template matrices are available in the R-Shiny application and sample datasets (see upload data tab). The data input format of the 2-factor interaction matrix is designed to be relatively flexible and accommodate both simple and more complex use cases. Similar to the single stressor-response functions, the 2-factor matrix is constructed by the user using data or expert opinion, depending on data availability.\nA hypothetical example (Figure 1) is included to show the interaction between stream canopy cover (low to high) and nutrients (as total Phosphorous). At low nutrients, habitat capacity for trout is highest under low canopy cover, where high light maximizes algal and invertebrate production (red circle). However, at high nutrients (eutrophic conditions), habitat capacity is highest under a closed canopy that suppresses algal growth and associated high temperatures and poor water quality (blue circle).\nLeave questions and comments below (via your GitHub account)",
    "crumbs": [
      "Appendices",
      "<span class='chapter-number'>A</span>  <span class='chapter-title'>Multi-Stressor Interaction Matrix</span>"
    ]
  },
  {
    "objectID": "appendix_interaction_matrix.html#customizable-two-factor-interaction-matrix",
    "href": "appendix_interaction_matrix.html#customizable-two-factor-interaction-matrix",
    "title": "Appendix A — Multi-Stressor Interaction Matrix",
    "section": "",
    "text": "Figure A.1: Example interaction surface for the CEMPRA 2-factor interaction matrix between trout capacity canopy cover and nutrients.",
    "crumbs": [
      "Appendices",
      "<span class='chapter-number'>A</span>  <span class='chapter-title'>Multi-Stressor Interaction Matrix</span>"
    ]
  },
  {
    "objectID": "appendix_interaction_matrix.html#data-preparation",
    "href": "appendix_interaction_matrix.html#data-preparation",
    "title": "Appendix A — Multi-Stressor Interaction Matrix",
    "section": "A.2 Data Preparation",
    "text": "A.2 Data Preparation\nThe 2-factor interaction matrices are optionally included as additional tabs in the stressor response workbook. The formatting must follow Figure 2. The worksheet name must begin with “MInt_” followed by a unique name (ideally without spaces). In this example we used “MInt_AB”.\n\n\n\n\n\n\nFigure A.2: Example Matrix interaction surface for stressor variables A and B.\n\n\n\nThe header section of the workbook must include several inputs:\n\nMatrix Name (cell B1): A custom name given to the 2-way interaction (for personal reference purposes). This name should match the worksheet name (e.g., MInt_AB). Try to avoid using spaces or special characters outside of MInt_.\nColumns (cell B2): The name of the stressor variable representing the column header values in the system capacity table. In the previous example column header values in the subsequent tables will map onto this stressor. Ensure that the spelling of the stressor matches the spelling throughout the rest of the workbook.\nRows (B3): The name of the stressor variable representing the row names in the system capacity table. In the previous example row names in the subsequent tables will map onto this stressor. Ensure that the spelling of the stressor matches the spelling throughout the rest of the workbook.\nMain Effects: Specify whether the system capacity estimates in the 2-factor interaction matrix account for (include) the main effects. Options for cell B4 can be either “Included” or “Excluded”.\n\nIncluded: When cell B4 is set to “Included” the system capacity estimates are intended to represent the entire relationship between the two stressors at their respective levels (main effects and interactive effects combined). If the main effects option is set to “Included” the cumulative system capacity calculation will be adjusted to automatically omit both of the univariate stressor-response relationships (if they have been specified in the stressor-response workbook) and only evaluate their combined effect from the 2-factor interaction matrix. This modification is necessary to avoid double counting the effects of each stressor.\nFor example, if the Stressor-Response workbook contained stressor-response worksheets for “Nutrients”, “Canopy_Cover” and an interactive matrix (e.g., “Matrix_1”) for “Nutrients and Canopy_Cover”, then the Joe Model would only evaluate system capacity values from the matrix and discard the univariate effects with the assumption that they are already accounted for in the matrix capacity data (Y = “VarA” + “VarB” + “Nutrients and Canopy_Cover”).\nExcluded (experimental – apply with caution): Setting cell B4 (Main Effects) to “Excluded” indicates that the interaction surface only describes the interactive effects and that the main effects (defined in the other stressor-response worksheets) must remain in the cumulative system capacity calculation. If the “Excluded” option is selected, the 2-factor interaction matrix ultimately acts as an additional stressor variable to modify the system capacity score. Setting the main effects to “Excluded” is convenient when users wish to quickly evaluate scenarios with and without customized interactive effects.\n\n\nImportant Note: The implementation of interactive effects and main effects in the CEMPRA tool is different from a conventional logistic regression equation. There is no intercept, context-dependent coefficients, or link function. The interactive effect is simply added into the formula like any other stressor. For example, if the Stressor-Response workbook contained stressor-response worksheets for “Nutrients”, “Canopy_Cover” and an interactive matrix (e.g., “Matrix_1”) for “Nutrients and Canopy_Cover”, then the Joe Model would incorporate all three terms into the equation as stressor-response terms (Y = “VarA” + “VarB” + “Nutrients” + “Canopy Cover” + “Nutrients and Canopy_Cover”).\nThe difference between the 2-factor interaction matrix calculations with the main effects “Included” and “Excluded” is further illustrated in the following figure:\n\n\n\n\n\n\nFigure A.3: Difference between main effects being included or excluded from 2-factor interaction matrix summary. The Interaction factor for main effects Excluded (X) will be different (in this case lower) than for main effects Included.\n\n\n\nThe formatting of the matrix worksheet allows for some flexibility (see example below), but the variable inputs in cells B1:B4 must be kept in their original positions. For each stressor variable, the user can define any number of steps (intervals) provided that the stressor column variable (x-axis) starts in cell C6 and extends right (associated with columns – B2), and the stressor row variable (y-axis) starts in cell B7 and extends downward (associated with rows – B3 stressor). See figure Figure 4.\n\n\n\n\n\n\nFigure A.4: Matrices of different resolutions.\n\n\n\nIf values in the stressor magnitude workbook do not align exactly with stressor values in the column and row heads of the interaction matrix, then the system capacity value will be calculated with linear interpolation. NULL or missing values from the stressor magnitude workbook will omit the HUC or subbasin assessment unit from any calculation of habitat capacity or cumulative effects.\nCommon Errors and Issues:\n\nOrder stressors with values increasing: Matrix column and row header values must be sorted non-decreasingly and contain no NA values or blank values. For example, 800, 600, 400 should be reordered as 400, 600, 800 in either the row or column headers for each stressor.\nKeep template clean: Format of template has been altered or additional content is placed in rows or columns to the left or below matrix tables.\nErrors in header and meta data",
    "crumbs": [
      "Appendices",
      "<span class='chapter-number'>A</span>  <span class='chapter-title'>Multi-Stressor Interaction Matrix</span>"
    ]
  },
  {
    "objectID": "appendix_interaction_matrix.html#population-model",
    "href": "appendix_interaction_matrix.html#population-model",
    "title": "Appendix A — Multi-Stressor Interaction Matrix",
    "section": "A.3 Population Model",
    "text": "A.3 Population Model\nThe 2-factor interaction matrix can also be used to define interactions linked to vital rates in the population model. The parameterization and setup for this is identical to how other variables are described in the stressor-response workbook. Ensure that linkages are properly defined in the “Main” coversheet for each of the input stressors being used as rows and columns.",
    "crumbs": [
      "Appendices",
      "<span class='chapter-number'>A</span>  <span class='chapter-title'>Multi-Stressor Interaction Matrix</span>"
    ]
  },
  {
    "objectID": "appendix_socio_economic.html",
    "href": "appendix_socio_economic.html",
    "title": "Appendix B — Socio-economic Evaluation of Restoration Actions",
    "section": "",
    "text": "Download the SE Module\n\nThe Joe Model and Life Cycle Model components of the CEMPRA tool primarily focus on status, condition, and relative risk rating(s) among assessment units, scenarios, and stressors, providing insights when formulating management priorities for a watershed or study system. However, First Nations, industry, governing bodies, and conservation initiatives/collaboratives seeking to mitigate stressors within a framework of potential restoration actions need to understand the comparative costs of competing management interventions. To address this need, the socio-economic component of the CEMPRA tool generates an overview of the costs and effectiveness of user-defined management strategies associated with stressor reduction. The socio-economic component attempts to provide a high-level cost-benefit analysis of restoration alternatives, and is designed to facilitate decision-making by quantifying the economic implications of competing restoration strategies.\nDownload the manual for the socioeconomic module (linked below).\n\n\n\nOverview of the linked relationships underlying the socio-economic evaluation of restoration actions in the CEMPRA tool showing a.) reduction in stressor level from a hypothetical management action, following a pre-defined stressor-response function; b.) cost associated with the management action/intervention (intervention-cost function); and c.) the resulting cost-benefit analysis that provides insights into relative trade-offs between restoration actions, stressor reduction, and associated cost.\n\n\nDownload Restoration Action Socio-Economic Module User Guide Here\n\n\n\nLeave questions and comments below (via your GitHub account)",
    "crumbs": [
      "Appendices",
      "<span class='chapter-number'>B</span>  <span class='chapter-title'>Socio-economic Evaluation of Restoration Actions</span>"
    ]
  },
  {
    "objectID": "appendix_formula_builder.html",
    "href": "appendix_formula_builder.html",
    "title": "Appendix C — The Formula Builder",
    "section": "",
    "text": "C.1 Creating Novel Stressors and Stressor-Response Relationships with the Formula Builder\nThe ‘Custom Stressor Creation’ module, within the ‘Special Features’ tab, can be used to develop novel stressors from existing data using a formula builder. The formula builder takes in existing variables, including existing stressors, and provides the option to add them into a custom formula expression input box to generate new variables. This module can be creatively leveraged for a myriad of applications. For example, the interaction between two stressors can be expressed and modelled as a new unique metric, existing stressors can be re-computed for simple scenarios (e.g., adding 2 degrees to represent future climate change, or multiplying a land-use stressor by 0.8). The ‘Custom Stressor Creation’ module can also be used for more advanced applications such as applying preexisting regression equations to develop new stressors from specific input datasets where prior research has already developed detailed SR functions that are not expressed as simple univariate relationships.\nThere are several steps in the ‘Custom Stressor Creation’ module. First, a user adds selected variables (as stressors) into a formula builder input text box. Various mathematical expressions (e.g., addition, subtraction, multiplication, division, exponents, brackets, log, log10 etc.) can be used to customize the formula. Next, the user clicks the ‘Run Formula and Generate New Data’ button to apply the equation to all unique locations. A new temporary variable is generated and stored for each location that consists of the numerical result of the custom formula. The user carefully reviews the result of the equation to make an informed decision whether the new variable should be added to the model as a novel stressor. A stressor-response relationship is assigned to the new raw stressor values (either by copying values from a pre-existing stressor-response curve or developing a new custom stressor-response curve). Finally, the values are saved and added to the primary stressor magnitude and stressor-response datasets for use in the Joe Model and/or Population Model. Note that if the custom formula is treated as a stand-alone stressor response function, then the new raw stressor values generated by the function can be treated directly as the predicted habitat or system capacity, rather than treated as a stressor to which a stressor-response function is applied. Alternatively, an identity stressor-response function (straight line with a slope of 1) can be chosen as the new custom stressor-response curve to treat the formula output as a direct metric of habitat capacity.\nLeave questions and comments below (via your GitHub account)",
    "crumbs": [
      "Appendices",
      "<span class='chapter-number'>C</span>  <span class='chapter-title'>The Formula Builder</span>"
    ]
  },
  {
    "objectID": "appendix_formula_builder.html#creating-novel-stressors-and-stressor-response-relationships-with-the-formula-builder",
    "href": "appendix_formula_builder.html#creating-novel-stressors-and-stressor-response-relationships-with-the-formula-builder",
    "title": "Appendix C — The Formula Builder",
    "section": "",
    "text": "Figure C.1: Navigating to the Custom Stressor Builder Module.\n\n\n\n\n\nC.1.1 Step 1: Create a New Stressor with the Formula Builder\nCreate a new stressor by entering a custom formula in the formula expression input textbox. Various mathematical expressions can be used such as addition (+), subtraction (-), multiplication (*), division (/), exponents (x^y), brackets ((x)), log (e.g., log(x)), sqrt (e.g., sqrt(x)), log10 etc. Be careful to ensure that your formula is valid (e.g., has matching closing brackets). The only variables that can be used are the names of preexisting stressors in the stressor magnitude input workbook. Make sure the spelling is exact. Add custom metrics to the stressor magnitude data as needed. You do not need to define a stressor-response relationship for any custom habitat metrics that may exist only in the stressor-magnitude workbook for the purposes of formulating the new stressor. The following examples provide some sample formulas to help develop an understanding of the format and possibilities:\n\nApply a function to estimate the habitat capacity (N) of a target species (e.g., cutthroat trout) by taking the cumulative product of habitat unit area summaries (e.g., m² of pool habitat in a stream) and estimates of the hypothetical max parr density per habitat unit type [e.g., 0.16 parr/m²]:\n\n(stream_area_pool*0.16)+(stream_area_glide*0.04)+(stream_area_riffle*0.01)\n\nApply a simple fixed increase or decrease in the raw value of a stressor (e.g., fines):\n\nFines_pct*0.8\nFines_pct-10\n\nDefine a possible interactive effect between stream temperature and peak flows (example from Wenger et al., 2011: PNAS):\n\n(-0.59*Temp)+((-0.88*Temp)^2)+(-0.20*PeakFlows)\n\nApply a custom regression equation to roughly predict MWAT (Maximum Weekly Average Stream Temperature) from basin-level GIS variables (Moore et al., 2013: Canadian Water Resources Journal):\n\n7.91+(0.484*July_Temp)+(1.18*log10(Drainage_Area_km2+0.000001))+(-0.00306*Median_Elev_m)+(17.5*sqrt(Lake_Cover_pct/100))+(-9.43*sqrt(Glacier_Cover_pct/100))+(0.0529*(Reach_Gradient_pct/100))-(0.719*0.25)\n\n\nWhen ready, click the green ‘Run Formula and Generate New Data’ button to apply the equation across all locations and create a new temporary stressor metric (based on the result of applying the equation to stressor magnitude data from each location).\n\n\n\n\n\n\nFigure C.2: Entering a custom formula into the stressor builder.\n\n\n\n\n\nC.1.2 Step 2: Evaluate Stressor Values\nAfter the ‘Run Formula and Generate New Data’ button is pushed the new stressor values are temporarily cached for review. Summary statistics are shown on the right side of the display, and an interactive choropleth map interface is included below. Reviewing values in these sections is useful to identify possible errors and issues with formula entry or other bugs (i.e., users should evaluate whether predicted values are consistent with expectations based on the original source of the formula). The formula can be edited and rerun. Each time the ‘Run Formula and Generate New Data’ button is pushed the stressor data is overwritten.\nAt this stage, if users are treating the formula entered into the formula builder as a direct predictor of habitat or system capacity (i.e., a stand-alone stressor-response function), then the values can be directly saved and visualized as a direct measure of system capacity with no further transformation. This step then becomes the endpoint for data analysis. Users also have the option of treating the saved values as a composite stressor, and applying a stressor-response function to them as per the normal CEMPRA workflow, as described below.\n\n\n\n\n\n\nFigure C.3: Evaluating the raw stressor values generated from the formula builder.\n\n\n\n\n\nC.1.3 Step 3: Define or Develop Stressor-Response Data\nIn Step 3 users assign or develop a stressor-response relationship to be associated with the newly created stressor metric. Users may either copy an existing stressor-response relationship or create a new relationship from scratch. Copying an existing relationship can be useful if the newly created stressor represents a scenario or variant of a pre-existing stressor. Creating a new stressor-response relationship can be useful if the newly created stressor requires an entirely new relationship. Note that an alternative way to directly transform the new stressor to predicted habitat capacity scaled from 0-1 is to set the stressor-response function to a straight line with a slope of 1, which will function as an identity relationship.\nIf a novel stressor-response relationship is being created from scratch, use the following inputs to define how the stressor is linked to the focal species/system. The stressor-response relationship table will also need to be populated. Rows can be added or removed to adjust the complexity of the relationship.\n\n\n\n\n\n\nFigure C.4: Generating a novel stressor-response curve for the newly created stressor.\n\n\n\nPopulate the following table with the raw stressor values (e.g., stream temperature in degrees), the stressor-response relationship score for each level (scaled from 0 to 100%), the standard deviation (SD) of the response for each part of the relationship (in percent), and the lower and upper limits of the response score (both scale from 0% to 100%).\n\n\nC.1.4 Step 4: Save New Stressor to Global Dataset\nFinally, in Step 4, we take our newly created stressor and stressor-response relationship and add it to the stressor-magnitude and stressor-response datasets for use in the Joe and Population Model, as well as other components of the tool. After the ‘Add Stressor and Stressor-Response Relationship to Model’ button is pressed the entire application will update itself to include the newly created stressor. It is important to assign a clear and unique name to the new stressor. Do not use spaces or special characters.\n\n\n\n\n\n\nFigure C.5: Saving the newly created stressor and stressor-response relationship into the global dataset.",
    "crumbs": [
      "Appendices",
      "<span class='chapter-number'>C</span>  <span class='chapter-title'>The Formula Builder</span>"
    ]
  }
]