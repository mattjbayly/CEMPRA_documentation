<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>CEMPRA Guidance Document - Appendix A — Multi-Stressor Interaction Matrix</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./references.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./appendix_interaction_matrix.html">Appendices</a></li><li class="breadcrumb-item"><a href="./appendix_interaction_matrix.html"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Multi-Stressor Interaction Matrix</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">CEMPRA Guidance Document</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">CEMPRA</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01_intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02_stressor_response.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Stressor-Response Functions</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03_pathways_endpoints.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Modelling Pathways and Assessment Endpoints</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04_initial_setup.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Setup and Installation</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05_data_inputs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Data Inputs</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06_r_shiny_app.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">R-Shiny Application</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07_life_cycle_model.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Life Cycle Model</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08_stressor_response_library.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Stressor-Response Library</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09_case_study_applications.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Example Datasets</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10_r_package_tutorials.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">R Package Tutorials</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11_conclusions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Concluding Remarks</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix_interaction_matrix.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Multi-Stressor Interaction Matrix</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#customizable-two-factor-interaction-matrix" id="toc-customizable-two-factor-interaction-matrix" class="nav-link active" data-scroll-target="#customizable-two-factor-interaction-matrix"><span class="header-section-number">A.1</span> Customizable Two-Factor Interaction Matrix</a></li>
  <li><a href="#data-preparation" id="toc-data-preparation" class="nav-link" data-scroll-target="#data-preparation"><span class="header-section-number">A.2</span> Data Preparation</a></li>
  <li><a href="#population-model" id="toc-population-model" class="nav-link" data-scroll-target="#population-model"><span class="header-section-number">A.3</span> Population Model</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Appendix A — Multi-Stressor Interaction Matrix</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="customizable-two-factor-interaction-matrix" class="level2" data-number="A.1">
<h2 data-number="A.1" class="anchored" data-anchor-id="customizable-two-factor-interaction-matrix"><span class="header-section-number">A.1</span> Customizable Two-Factor Interaction Matrix</h2>
<p>Customizable 2-factor interaction matrices may be (optionally) included by users to specify non-additive interactions between stressor variables (e.g., antagonistic, synergistic, etc.). If included, these matrices define the mean system capacity at different combination levels between two stressors. This can be especially important to capture conditional effects, attenuating or exacerbating factors, and/or compound variance and uncertainties. The 2-factor interaction matrices can also be a convenient mechanism to explore hypothetical and experimental scenarios.</p>
<p>The 2-factor interaction matrices are defined in the Stressor-Response Excel workbook. Template matrices are available in the R-Shiny application and sample datasets (<em>see upload data tab</em>). The data input format of the 2-factor interaction matrix is designed to be relatively flexible and accommodate both simple and more complex use cases. Similar to the single stressor-response functions, the 2-factor matrix is constructed by the user using data or expert opinion, depending on data availability.</p>
<p>A hypothetical example (Figure 1) is included to show the interaction between stream canopy cover (low to high) and nutrients (as total Phosphorous). At low nutrients, habitat capacity for trout is highest under low canopy cover, where high light maximizes algal and invertebrate production (red circle). However, at high nutrients (eutrophic conditions), habitat capacity is highest under a closed canopy that suppresses algal growth and associated high temperatures and poor water quality (blue circle).</p>
<div id="fig-figure1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="images/image001.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;A.1: Example interaction surface for the CEMPRA 2-factor interaction matrix between trout capacity canopy cover and nutrients.</figcaption>
</figure>
</div>
</section>
<section id="data-preparation" class="level2" data-number="A.2">
<h2 data-number="A.2" class="anchored" data-anchor-id="data-preparation"><span class="header-section-number">A.2</span> Data Preparation</h2>
<p>The 2-factor interaction matrices are optionally included as additional tabs in the stressor response workbook. The formatting must follow Figure 2. The worksheet name must begin with “<strong>MInt_</strong>” followed by a unique name (ideally without spaces). In this example we used “MInt_AB”.</p>
<div id="fig-figure2" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="images/image002.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;A.2: Example Matrix interaction surface for stressor variables A and B.</figcaption>
</figure>
</div>
<p>The header section of the workbook must include several inputs:</p>
<ul>
<li><p><strong>Matrix Name (cell B1):</strong> A custom name given to the 2-way interaction (for personal reference purposes). This name should match the worksheet name (e.g., MInt_AB). Try to avoid using spaces or special characters outside of MInt_.</p></li>
<li><p><strong>Columns (cell B2):</strong> The name of the stressor variable representing the column header values in the system capacity table. In the previous example column header values in the subsequent tables will map onto this stressor. Ensure that the spelling of the stressor matches the spelling throughout the rest of the workbook.</p></li>
<li><p><strong>Rows (B3):</strong> The name of the stressor variable representing the row names in the system capacity table. In the previous example row names in the subsequent tables will map onto this stressor. Ensure that the spelling of the stressor matches the spelling throughout the rest of the workbook.</p></li>
<li><p><strong>Main Effects:</strong> Specify whether the system capacity estimates in the 2-factor interaction matrix account for (include) the main effects. Options for cell B4 can be either “Included” or “Excluded”.</p>
<ul>
<li><p><strong>Included:</strong> When cell B4 is set to “Included” the system capacity estimates are intended to represent the entire relationship between the two stressors at their respective levels (main effects and interactive effects combined). If the main effects option is set to “Included” the cumulative system capacity calculation will be adjusted to automatically omit both of the univariate stressor-response relationships (if they have been specified in the stressor-response workbook) and only evaluate their combined effect from the 2-factor interaction matrix. This modification is necessary to avoid double counting the effects of each stressor.</p>
<p><em>For example, if the Stressor-Response workbook contained stressor-response worksheets for “Nutrients”, “Canopy_Cover” and an interactive matrix (e.g., “Matrix_1”) for “Nutrients and Canopy_Cover”, then the Joe Model would only evaluate system capacity values from the matrix and discard the univariate effects with the assumption that they are already accounted for in the matrix capacity data (Y = “VarA” + “VarB” + “Nutrients and Canopy_Cover”).</em></p></li>
<li><p><strong>Excluded (experimental – apply with caution):</strong> Setting cell B4 (Main Effects) to “Excluded” indicates that the interaction surface only describes the interactive effects and that the main effects (defined in the other stressor-response worksheets) must remain in the cumulative system capacity calculation. If the “Excluded” option is selected, the 2-factor interaction matrix ultimately acts as an additional stressor variable to modify the system capacity score. Setting the main effects to “Excluded” is convenient when users wish to quickly evaluate scenarios with and without customized interactive effects.</p></li>
</ul></li>
</ul>
<p><strong>Important Note:</strong> The implementation of interactive effects and main effects in the CEMPRA tool is different from a conventional logistic regression equation. There is no intercept, context-dependent coefficients, or link function. The interactive effect is simply added into the formula like any other stressor. For example, if the Stressor-Response workbook contained stressor-response worksheets for “Nutrients”, “Canopy_Cover” and an interactive matrix (e.g., “Matrix_1”) for “Nutrients and Canopy_Cover”, then the Joe Model would incorporate all three terms into the equation as stressor-response terms (Y = “VarA” + “VarB” + “Nutrients” + “Canopy Cover” + “Nutrients and Canopy_Cover”).</p>
<p>The difference between the 2-factor interaction matrix calculations with the main effects “Included” and “Excluded” is further illustrated in the following figure:</p>
<div id="fig-figure3" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="images/image003.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;A.3: Difference between main effects being included or excluded from 2-factor interaction matrix summary. The Interaction factor for main effects Excluded (X) will be different (in this case lower) than for main effects Included.</figcaption>
</figure>
</div>
<p>The formatting of the matrix worksheet allows for some flexibility (see example below), but the variable inputs in cells B1:B4 must be kept in their original positions. For each stressor variable, the user can define any number of steps (intervals) provided that the stressor column variable (x-axis) starts in cell C6 and extends right (associated with columns – B2), and the stressor row variable (y-axis) starts in cell B7 and extends downward (associated with rows – B3 stressor). See figure Figure 4.</p>
<div id="fig-figure4" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="images/image004.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;A.4: Matrices of different resolutions.</figcaption>
</figure>
</div>
<p>If values in the stressor magnitude workbook do not align exactly with stressor values in the column and row heads of the interaction matrix, then the system capacity value will be calculated with linear interpolation. NULL or missing values from the stressor magnitude workbook will omit the HUC or subbasin assessment unit from any calculation of habitat capacity or cumulative effects.</p>
<p><strong>Common Errors and Issues:</strong></p>
<ul>
<li><p><strong>Order stressors with values increasing:</strong> Matrix column and row header values must be sorted non-decreasingly and contain no NA values or blank values. For example, 800, 600, 400 should be reordered as 400, 600, 800 in either the row or column headers for each stressor.</p></li>
<li><p><strong>Keep template clean:</strong> Format of template has been altered or additional content is placed in rows or columns to the left or below matrix tables.</p></li>
<li><p><strong>Errors in header and meta data</strong></p></li>
</ul>
</section>
<section id="population-model" class="level2" data-number="A.3">
<h2 data-number="A.3" class="anchored" data-anchor-id="population-model"><span class="header-section-number">A.3</span> Population Model</h2>
<p>The 2-factor interaction matrix can also be used to define interactions linked to vital rates in the population model. The parameterization and setup for this is identical to how other variables are described in the stressor-response workbook. Ensure that linkages are properly defined in the “Main” coversheet for each of the input stressors being used as rows and columns.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./references.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">References</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav>
</div> <!-- /content -->



</body></html>